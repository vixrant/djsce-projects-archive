/*!
 * bv-analytics.js v3.8.1
 * Bazaarvoice Analytics Client
 * Copyright 2015 Bazaarvoice, Inc.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(2),a=r(o),i=n(5),s=r(i),u=n(19),c="_bvaq",l="_bva";if(s["default"][c]=s["default"][c]||[],!s["default"][l]||s["default"][l]&&u(s["default"][l].version,"3.8.1")<0){var d=s["default"][l];s["default"][l]=new a["default"]({name:"default"}),d&&s["default"][l]._setStateFromTracker(d)}s["default"][c].length>0&&s["default"][l].push.apply(s["default"][l],s["default"][c]),s["default"][c]=s["default"][l]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e,n){"object"===("undefined"==typeof e?"undefined":i(e))&&(n=e,e=n.display||""),"object"===("undefined"==typeof t?"undefined":i(t))&&(n=t,e=n.display||"",t=n.client||""),n=n||{},this.name=n.name||"","string"==typeof t&&(n.client=t),"string"==typeof e&&(n.display=e),""!==this.name&&S["default"].trackers[this.name]&&T["default"].warn("A tracker with this name already exists: "+this.name),this._settings=u.extend({},this._defaults),this.version="3.8.1",this._shared={loadId:S["default"].loadId,tz:(new Date).getTimezoneOffset(),magpieJsVersion:this.version,source:n.source||null,environment:n.environment||null,client:n.client||null,dc:n.display||null,host:g["default"].host},this._batch=null,this._unloaded=!1;var r=this;f["default"].add(b["default"],"unload",function(){r._unload()}),f["default"].add(b["default"],"beforeunload",function(){r._unload()}),this._bvCookiesRequest=R,this._requestQueue=[],this._id=null,this._idQueue=[],S["default"].trackers[this.name]=this,"true"===(0,A.getDoNotTrackCookie)()&&(0,A.removeFirstPartyTrackingCookies)(this.getBrandDomain())}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(3),u=o(s),c=n(4),l=r(c),d=n(7),f=r(d),h=n(8),g=r(h),p=n(9),m=r(p),v=n(15),_=r(v),y=n(5),b=r(y),k=n(16),S=r(k),E=n(20),C=r(E),w=n(11),T=r(w),A=n(14),I={enableValidation:function(t){var e=t[t.length-1];return!e||"function"==typeof e||!!S["default"].trackers[e]}},x={"public":1,"private":1,internal:1},R=0,N=1,D=2,P=a.prototype;P.create=function(t){var e=t.name,n=S["default"].trackers[e];return n?(t.source&&n.setSource(t.source),t.environment&&n.setEnvironment(t.environment),t.client&&n.setClient(t.client),t.display&&n.setDisplay(t.display),n):new a(t)},P._defaults={customTrackerHostname:null,customAnonTrackerHostname:null,anonymous:!0,eu:!1,brandDomain:null,timing:!0,staging:!1,eventFilter:null},P._set=function(t,e){this._settings[t]=e},P._get=function(t){return this._settings[t]},P._filterClass=function(t){var e=this.getEventClassFilter();return e&&!e.exec(t)},P._getProtocol=function(){return"https:"},P._setStateFromTracker=function(t){if("number"!=typeof t.length){for(var e,n=["Client","Source","Display","Staging","Audience","Anonymous","LoadId","BrandDomain","Environment","EventClassFilter","TrackerHostname","AnonTrackerHostname"],r=0;r<n.length;r++)e=n[r],this["set"+e](t["get"+e]());return this}},P._trackerUrl=function(t,e){var n=this._getProtocol()+"//"+this.getTrackerHostname()+"/"+t;return e&&(n+="?_="+u.buster()),n},P._getPixel=function(t){return new m["default"]({validating:this.isValidating(),brandDomain:this.getBrandDomain(),data:u.extend({},this._shared,t)})},P._send=function(t){t.validating?this._sendValidatingRequest(t):this.getAnonymous()?this._sendRequest(t.getUrl({anonymous:!0,hostname:this.getTrackerHostname()})):this._sendTrackedRequest(t)},P._sendValidatingRequest=function(t){var e=this._get("validationCallback");l["default"].get(t.getUrl({anonymous:!1,hostname:"schema.mag.bazaarvoice.com"}),function(n){u.isFunction(e)?e(n,t.data):n.error&&T["default"].error("Invalid Magpie event: "+n)})},P._sendRequest=function(t,e){var n;n=new Image(1,1),u.isFunction(e)&&(n.onload=function(){n.onload=null,e()}),n.src=t},P._sendTrackedRequest=function(t){this._bvCookiesRequest===R&&this._setBVCookies(),this._bvCookiesRequest===D?this._sendRequest(t.getUrl({anonymous:this.getAnonymous(),hostname:this.getTrackerHostname()})):this._requestQueue.push(t)},P._setBVCookies=function(){var t=this,e=t._trackerUrl("sid.gif",!0);t._sendRequest(e,function(){t.getID(function(e){e.NoCookie&&((0,A.removeFirstPartyTrackingCookies)(t.getBrandDomain()),t._set("anonymous",!0)),t._bvCookiesRequest=D,t._flushRequestQueue()}),t._loadBVID()}),t._bvCookiesRequest=N},P._flushRequestQueue=function(){for(;this._requestQueue.length;)this._send(this._requestQueue.shift())},P._loadBVID=function(){var t=this,e=t._trackerUrl("id.json",!0),n=t.getTrackerHostname();l["default"].get(e,function(e){t._id=e,t._id.hostname=n,t._flushIdQueue()})},P._flushIdQueue=function(){for(var t,e=this._id,n=this._idQueue;n.length;)t=n.shift(),u.isFunction(t)&&t(e)},P._unload=function(){this._unloaded||(this.flushBatch(),this._unloaded=!0)},P._timing=function(){var t,e=b["default"].performance||b["default"].webkitPerformance||b["default"].mozPerformance||b["default"].oPerformance||b["default"].msPerformance||!1;return e!==!1&&e.timing?(t=e.timing,{dns:t.domainLookupEnd-t.domainLookupStart,con:t.connectEnd-t.connectStart,req:t.responseStart-t.connectEnd,res:t.responseEnd-t.responseStart,load:t.loadEventStart-t.responseEnd,tot:t.loadEventEnd-t.navigationStart}):{}},P._isPII=function(t){return t&&"pii"===t.substring(0,3).toLowerCase()},P.setClient=function(t){this._shared.client=t},P.getClient=function(){return this._shared.client},P.setDisplay=function(t){this._shared.dc=t},P.getDisplay=function(){return this._shared.dc},P.setAnonymous=function(t){var e="true"===(0,A.getDoNotTrackCookie)();e?this._set("anonymous",!0):this._set("anonymous",t)},P.getAnonymous=function(){return"true"===(0,A.getDoNotTrackCookie)()||this._get("anonymous")},P.setEU=function(t){this._set("eu",t)},P.getEU=function(){return this._get("eu")},P.setTrackerHostname=function(t){this._set("customTrackerHostname",t),this._id=null,this._bvCookiesRequest=R},P.getTrackerHostname=function(){var t=this._get("customTrackerHostname");if(t)return t;if(this.isValidating())return"schema.mag.bazaarvoice.com";var e="network";return this.getEU()&&(e+="-eu"),this.getStaging()&&(e+="-stg"),this.getAnonymous()&&(e+="-a"),e+=".bazaarvoice.com"},P.setAnonTrackerHostname=function(t){return T["default"].warn('The "setAnonTrackerHostname" function will be deprecated. Please use "setTrackerHostname".'),this.setTrackerHostname(t)},P.getAnonTrackerHostname=function(){return T["default"].warn('The "getAnonTrackerHostname" function will be deprecated. Please use "getTrackerHostname".'),this.getTrackerHostname()},P.setBrandDomain=function(t){u.isString(t)&&t.length>0?(0,A.setBrandCookies)(t):t=null,this._set("brandDomain",t)},P.getBrandDomain=function(){return this._get("brandDomain")},P.enableTiming=function(){this._set("timing",!0)},P.disableTiming=function(){this._set("timing",!1)},P.setSource=function(t){this._shared.source=t},P.getSource=function(){return this._shared.source},P.setEnvironment=function(t){this._shared.environment=t},P.getEnvironment=function(){return this._shared.environment},P.setAudience=function(t){var e=this._shared;x[t]&&("public"===t?delete e.audience:e.audience=t)},P.getAudience=function(){return this._shared.audience||"public"},P.enableValidation=function(t){this._set("validate",!0),u.isFunction(t)&&this._set("validationCallback",t)},P.disableValidation=function(){this._set("validate",!1),this._set("validationCallback",null)},P.isValidating=function(){return this._get("validate")},P.setStaging=function(t){this._set("staging",!!t),this._id=null,this._bvCookiesRequest=R},P.getStaging=function(){return this._get("staging")},P.getEventClassFilter=function(){return this._get("eventClassFilter")},P.setEventClassFilter=function(t){if(u.isString(t))try{t=new RegExp(t)}catch(e){T["default"].error("Invalid regex passed to event class filter.")}this._set("eventClassFilter",t)},P.getID=function(t){u.isFunction(t)&&(this._id?t(this._id):this._idQueue.push(t))},P.trackEvent=function(t,e){if(!this._filterClass(t))if(e=e||{},e.cl=t,u.transformData(e,"Brand","brand"),this._isPII(t)){var n=this.getAnonymous();this.setAnonymous(!0);var r=this._getPixel(e);this._sendRequest(r.getUrl({anonymous:!0,hostname:this.getTrackerHostname()})),this.setAnonymous(n);var o={bvProduct:e.bvProduct,cl:e.cl,detail1:e.detail1,name:e.name,productId:e.productId};S["default"].dispatcher.fireCallbacks(t,o,this.name)}else{var a=this._getPixel(e);this._send(a),S["default"].dispatcher.fireCallbacks(t,a.getEvent(),this.name)}},P.trackPageView=function(t){t=t||{},u.extend(t,g["default"]),this._get("timing")&&(t.t=this._timing()),this.trackEvent("PageView",t)},P.trackConversion=function(t){var e=_["default"].create(t);e&&(e.containsPII()&&this.trackEvent(_["default"].PII_EVENT_CLASS,e.getPIIData()),this.trackEvent(_["default"].EVENT_CLASS,e.getAnonymizedData()))},P.trackTransaction=function(t){function e(t){if(t=u.extend({},t||{}),"transaction_id"in t&&(t.orderId=t.transaction_id,delete t.transaction_id),"products"in t&&(t.items=t.products,delete t.products),u.isArray(t.items)){var e,n;for(e=0,n=t.items.length;e<n;e++)t.items[e].orderId=t.orderId,"product_id"in t.items[e]&&(t.items[e].sku=t.items[e].product_id,delete t.items[e].product_id)}var r={type:"Transaction",label:"TransactionThankYou",value:null};for(var o in r)"undefined"==typeof t[o]&&(t[o]=r[o]);return t}this.trackConversion(e(t))},P.addMeta=function(t,e){this._shared.meta||(this._shared.meta={}),this._shared.meta[t]=e},P.removeMeta=function(t){var e=this._shared.meta;t in e&&e.hasOwnProperty(t)&&delete e[t]},P.addBatch=function(t){this._batch&&this._batch.items.length>0&&this.flushBatch(),this._batch={data:t||{},items:[]}},P.addBatchItem=function(t,e){var n;if(!this._filterClass(t)){if(this._isPII(t))return this.trackEvent(t,e);e=e||{},e.cl=t,u.transformData(e,"Brand","brand"),S["default"].dispatcher.fireCallbacks(t,this._getPixel(e).getEvent(),this.name),this._batch||this.addBatch(),this._batch.items.push(e),n=this._getPixel(this.getBatch());var r=n.getUrl({anonymous:this.getAnonymous(),hostname:this.getTrackerHostname()});n.tooLong&&(this._batch.items.pop(),0===this._batch.items.length?this._sendRequest(r):(this.flushBatch(),this._batch.items.push(e)))}},P.flushBatch=function(){this._batch&&this._batch.items&&0!==this._batch.items.length&&(this._send(this._getPixel(this.getBatch())),this._batch.items=[])},P.getBatch=function(){return this._batch?u.extend({batch:this._batch.items},this._batch.data):""},P.push=function(){try{for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];if(u.isFunction(n))n.call(b["default"]);else if(u.isArray(n)){if(0===n.length)continue;var r=n[0];if(!u.isString(r)||"_"===r.charAt(0))continue;if(!u.isFunction(this[r]))continue;var o=n.slice(1),a=o[o.length-1],i=S["default"].trackers[a];if(!i){var s=!I[r]&&this[r].length===o.length||I[r]&&I[r](o);if(!s){T["default"].warn("No tracker was found with the name "+a);var c={name:"Implementation Error",type:"Error",source:"analyticsjs",detail1:"Named tracker was not found",detail2:a,detail3:r};this.trackEvent("Error",c);continue}i=S["default"].trackers["default"]}i[r].apply(i,o)}}}catch(l){T["default"].error(l.stack)}return 1},P.resetLoadId=function(){S["default"].loadId=u.loadId(),this._shared.loadId=S["default"].loadId},P.setLoadId=function(t){S["default"].loadId=t,this._shared.loadId=t},P.getLoadId=function(){return this._shared.loadId},P.configureSCIProvider=function(t,e){var n=C["default"].create(t,e);this.registerListener("*",n,this.name)},P.registerListener=function(t,e,n){return"function"==typeof t&&(n=e,e=t,t="*"),"function"!=typeof e?void T["default"].warn("registerListener arg callback must be a function"):"string"!=typeof n||"undefined"==typeof n?void T["default"].warn("registerListener arg name must be a string."):void S["default"].dispatcher.registerCallback(t,e,n)},P.doNotTrack=function(){var t=this.getBrandDomain();(0,A.setDoNotTrackCookie)(t),(0,A.removeFirstPartyTrackingCookies)(t),this._set("anonymous",!0)},t.exports=a},function(t,e){"use strict";function n(t){var e,n,r=[].slice.call(arguments,1);for(var o in r)if(r.hasOwnProperty(o)){e=r[o];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t}function r(){return Math.round(2147483647*Math.random()).toString(36)}function o(t){return"[object Array]"===p.call(t)}function a(t){return s(t)&&"[object Function]"===p.call(t)}function i(t){return"string"==typeof t||c(t)&&"[object String]"===p.call(t)}function s(t){var e="undefined"==typeof t?"undefined":g(t);return!!t&&("object"===e||"function"===e)}function u(t){return"number"==typeof t||c(t)&&"[object Number]"===p.call(t)}function c(t){return!!t&&"object"===("undefined"==typeof t?"undefined":g(t))}function l(){for(var t=16,e=20,n=Math.floor(Math.random()*(e-t+1)+t),r="",o=0;o++<n;)r+=(16*Math.random()|0).toString(16);return r}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:e%4+8;return n.toString(16)})}function f(t,e,n){"undefined"!=typeof t&&null!==t&&e!==n&&t.hasOwnProperty(e)&&(t[n]=t[e],delete t[e])}function h(){if(navigator.cookieEnabled)return function(){for(var t=0,e=document.domain,n=e.split("."),r="_gd"+(new Date).getTime();t<n.length-1&&document.cookie.indexOf(r+"="+r)===-1;)e=n.slice(-1-++t).join("."),document.cookie=r+"="+r+";domain="+e+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+e+";",e}()}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.prototype.toString;t.exports={extend:n,buster:r,isArray:o,isFunction:a,isString:i,isObject:s,isNumber:u,isObjectLike:c,loadId:l,uuid:d,transformData:f,getDomainWithoutSubdomain:h}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e,n){var r,o=(t||"").indexOf("?")===-1?"?":"&";return s.isFunction(e)&&(r="_bvajsonp"+ ++f,h[r]=function(t){try{delete h[r]}catch(n){h[r]=null}e(t)},d["default"].loadScript(t+o+(n||"callback")+"="+r)),r}var i=n(3),s=o(i),u=n(5),c=r(u),l=n(6),d=r(l),f=0,h=c["default"];t.exports={get:a}},function(t,e){"use strict";t.exports=new Function("return this;")()},function(t,e,n){function r(){return s.getElementsByTagName("script")[0]}function o(t){return!t||"loaded"===t||"complete"===t||"uninitialized"===t}function a(t,e,n){if(!t||"string"!=typeof t)throw new Error("`url` must be a string");if("number"!=typeof e.timeout)throw new Error("`options.timeout` must be a number");if(n&&"function"!=typeof n)throw new Error("`callback` must be a function")}var i=n(5),s=i.document,u=1e4;t.exports={loadScript:function(t,e,n){function i(t){d=!0,clearTimeout(f),l.onload=l.onreadystatechange=l.onerror=null,l.parentNode.removeChild(l),"function"==typeof n&&n(t)}"function"==typeof e&&(n=e,e=null),e=e||{},e.timeout=e.timeout||u,a(t,e,n);var c,l=s.createElement("script"),d=!1;if(e.attributes)for(c in e.attributes)l.setAttribute(c,e.attributes[c]);l.onreadystatechange=l.onload=function(){!d&&o(l.readyState)&&i()},l.onerror=function(){d||i(new Error("Error: could not load "+t))};var f=setTimeout(function(){d||i(new Error("Error: script timeout "+t))},e.timeout);setTimeout(function(){l.src=t;var e=r();e.parentNode.insertBefore(l,e)},0)},loadStyleSheet:function(t,e,n){function c(t){f=!0,clearTimeout(h),d.onload=d.onreadystatechange=d.onerror=null,"function"==typeof n&&n(t)}if("function"==typeof e&&(n=e,e=null),e=e||{},e.timeout=e.timeout||u,a(t,e,n),"injectionNode"in e&&!(e.injectionNode instanceof i.Element))throw new Error("`options.injectionNode` must be a DOM node");var l,d=s.createElement("link"),f=!1;if(e.attributes)for(l in e.attributes)d.setAttribute(l,e.attributes[l]);d.onreadystatechange=d.onload=function(){!f&&o(d.readyState)&&c()},d.onerror=function(){f||c(new Error("Error: could not load "+t))};var h=setTimeout(d.onerror,e.timeout);setTimeout(function(){d.media="only x",d.rel="stylesheet",d.type="text/css",d.href=t,setTimeout(function(){d.media="all"},0);var n=e.injectionNode||r().parentNode;try{n.appendChild(d)}catch(o){c(new Error("Error: could not append LINK element"))}},0)}}},function(t,e){"use strict";function n(t,e,n,r){t.addEventListener?t.addEventListener(e,n,!!r):t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,!!r):t.detachEvent&&t.detachEvent("on"+e,n)}t.exports={add:n,remove:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o,a,i=n(5),s=r(i),u=s["default"].navigator,c=s["default"].screen,l=document,d=l.getElementsByTagName("link"),f=d.length;for(a=0;a<f;a++)"canonical"===d[a].getAttribute("rel")&&(o=d[a].href);t.exports={host:s["default"].location.host,href:s["default"].location.href,ref:l.referrer,canurl:o,res:c?c.width+"x"+c.height:"-",lang:(u&&(u.language||u.browserLanguage)||"-").toLowerCase(),charset:l.characterSet||l.charset||"-",geo:navigator.geolocation?1:0,cookies:navigator.cookieEnabled?1:0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e=t.validating,n=t.brandDomain,r=t.data;if(!r)throw new Error("data is required for tracking url");this.brandDomain=n,this.data=this._sanitizeUrlData(r),this.tooLong=!1,this.validating=e}var i=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(u){o=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(3),u=o(s),c=n(10),l=r(c),d=n(11),f=r(d),h=n(14),g=n(12),p="r_",m=2036,v=g?m:8192,_={PageView:{ref:1}},y={cl:0,loadId:1,type:2},b="https",k=/(\/|.\w*(=|%(25)*3D))([0-9A-F][0-9A-F](%(25)*2C)?)*(7573657269643d|7573657249643d|7573657249443d|5573657269643d|5573657249643d|5573657249443d|5553455249443d)([0-9A-F][0-9A-F](%(25)*2C)?)*/gi;a.prototype.getEvent=function(){return this._buildEvent(this.data)},a.prototype.getUrl=function(t){var e=t.anonymous,n=t.hostname;if("undefined"==typeof n)throw new Error("hostname required to build pixel url.");if("undefined"==typeof e)throw new Error("anonymous required to build pixel url.");return this._buildUrl({ev:this._buildEvent(this.data),ignoreTooLong:!1,anonymous:e,hostname:n})},a.prototype._buildEvent=function(t){var e=(0,h.getBrandCookies)(this.brandDomain),n=u.extend({},e,t);return n._=u.buster(),n},a.prototype._buildUrl=function(t){var e,n,r,o=t.anonymous,a=t.hostname,i=t.ev,s=t.ignoreTooLong;if(e=this.encode(i),!e)return"";var u=(o?"a":"st")+(this.validating?".json":".gif"),c=b+"://"+a+"/"+u;return n=c+"?"+e.required,r=v-n.length,r<0?(n=s?"":this._urlTooLong({url:n,encoded:e,anonymous:o,hostname:a}),this.tooLong=!0):e.optional.length>0&&(n+=this.addOptional(e.optional,r)),n},a.prototype._urlTooLong=function(t){var e=t.url,n=t.encoded,r=t.anonymous,o=t.hostname,a={cl:"Magpie",type:"LongUrl",length:(e||"").length,maxLength:v,targetCl:this.data.cl?this.data.cl.substr(0,200):null,longestField:n.longestField.substr(0,200)};return this._buildUrl({ev:this._buildEvent(a),ignoreTooLong:!0,anonymous:r,hostname:o})},a.prototype.addOptional=function(t,e){var n,r,o,a,i="";for(t=t||[],a=t.length,n=0;e>0&&n<a;n++)r=t[n]||"",r.length+1>e&&(r=r.substr(0,e-1),r.indexOf("=")===-1)||(o="&"+r,i+=o,e-=o.length);return i},a.prototype.quoteParam=function(t,e){var n=null;if(void 0!==t&&void 0!==e)try{(u.isArray(e)||u.isObject(e))&&(t=p+t,e=l["default"].encode(e)),n=l["default"].quote(t)+"="+l["default"].quote(""+e)}catch(r){f["default"].error(r.stack)}return n},a.prototype.encode=function(t){var e,n,r=_[t.cl]||{},o=0,a=[],i=[],s={optional:[],longestField:null};if(!u.isObject(t))return null;for(e in t)if(t.hasOwnProperty(e)&&null!==t[e]&&t[e]===t[e]&&(n=this.quoteParam(e,t[e]),null!==n))if(r&&e in r)s.optional.push(n);else{if(e in y){var c=y[e];a.length>c?a.splice(c,0,n):a.push(n)}else i.push(n);n.length>o&&(s.longestField=e,o=n.length)}return s.required=a.concat(i).join("&"),s},a.prototype._sanitizeUrlData=function(t){var e=this;if(t instanceof Object==!1)return t;var n=["ref","href","page"];return Object.keys(t).forEach(function(r){n.indexOf(r.toLowerCase())!==-1&&(t[r]=e._removeURLParameters(t[r],k)),"batch"===r&&t[r].forEach(function(t){Object.keys(t).forEach(function(r){n.indexOf(r.toLowerCase())!==-1&&(t[r]=e._removeURLParameters(t[r],k))})})}),t},a.prototype._removeURLParameters=function(t,e){if(!e)return t;var n=t.split("?"),r=i(n,2),o=r[0],a=r[1];if(!a)return t;var s=a.replace(e,"");return"&"===s.charAt(0)&&(s=s.substring(1)),s?o+"?"+s:o},t.exports=a},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={};r.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var t=[],e=0;e<16;e++)for(var n=0;n<16;n++)if(e+n!==0){var o=String.fromCharCode(16*e+n);/\w|[\-_.\/~]/.test(o)||t.push("\\u00"+e.toString(16)+n.toString(16))}r.not_idchar=t.join("")}(),r.not_idchar=" \t\r\n\"<>\\[\\]{}'!=:(),*@$;&",r.not_idstart="-0123456789",function(){var t="[^"+r.not_idstart+r.not_idchar+"][^"+r.not_idchar+"]*";r.id_ok=new RegExp("^"+t+"$"),r.next_id=new RegExp(t,"g")}(),r.quote=function(t){var e=r.uri_ok;return/^[A-Za-z0-9_\-]*$/.test(t)?t:(t=t.replace(/([^A-Za-z0-9_\-])/g,function(t,n){var r=e[n];return r?n:encodeURIComponent(n)}),t.replace(/%20/g,"+"))},function(){var t={"'":!0,"!":!0},e={array:function(t){var r,o,a,i,s=["!("],u=t.length;for(a=0;a<u;a+=1)i=t[a],o=e["undefined"==typeof i?"undefined":n(i)],o&&(i=o(i),"string"==typeof i&&(r&&(s[s.length]=","),s[s.length]=i,r=!0));return s[s.length]=")",s.join("")},"boolean":function(t){return t?"!t":"!f"},"null":function(t){return"!n"},number:function(t){return isFinite(t)?String(t).replace(/\+/,""):"!n"},object:function(t){if(t){if(t instanceof Array)return e.array(t);if("object"===n(t.__prototype__)&&"undefined"!=typeof t.__prototype__.encode_rison)return t.encode_rison();var r,o,a,i,s,u=["("],c=[];for(a in t)c[c.length]=a;for(c.sort(),s=0;s<c.length;s++)a=c[s],i=t[a],o=e["undefined"==typeof i?"undefined":n(i)],o&&(i=o(i),"string"==typeof i&&(r&&(u[u.length]=","),u.push(e.string(a),":",i),r=!0));return u[u.length]=")",u.join("")}return"!n"},string:function(e){return""===e?"''":r.id_ok.test(e)?e:(e=e.replace(/(['!])/g,function(e,n){return t[n]?"!"+n:n}),"'"+e+"'")},undefined:function(t){return"!n"}};r.encode=function(t){return e["undefined"==typeof t?"undefined":n(t)](t)}}(),t.exports=r},function(t,e,n){function r(t,e){if(s!==h.OFF&&o.console){if(e=[].slice.call(e),"function"==typeof e[0]&&(e=e[0]()),a)return void console.log(e);try{(console[t]||console.log).apply(console,e)}catch(n){}}}var o=n(5),a=n(12),i=n(13),s=4,u={},c=i.read("_bvui_debug");if(c)for(var l,d=c.split(","),f=0;f<d.length;f++)l=d[f].split(":"),u[l[0]]=l[1];u.logLevel&&(s=u.logLevel);var h={DEBUG:-1,LOG:0,INFO:1,WARN:2,ERROR:3,OFF:4,getLogLevel:function(){return s},setLogLevel:function(t,e){s=!u.logLevel||e?t||h.LOG:u.logLevel,r("log",["Log level set to",s])},debug:function(){s<=h.DEBUG&&r("log",arguments)},log:function(){s<=h.LOG&&r("log",arguments)},info:function(){s<=h.INFO&&r("info",arguments)},warn:function(){s<=h.WARN&&r("warn",arguments)},error:function(){s<=h.ERROR&&r("error",arguments)},count:function(){s<h.INFO&&r("count",arguments)},time:function(){s<h.WARN&&r("time",arguments)},timeEnd:function(){s<h.WARN&&r("timeEnd",arguments)},group:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("group",e),r("time",e))},groupEnd:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("groupEnd",e),r("timeEnd",e))},assert:function(t,e){if(s!==h.OFF){if("function"==typeof t)return void h.assert.apply(null,t());if(!t)throw new Error("Assertion failed: "+e)}}};t.exports=h},function(t,e,n){var r=n(5).document;t.exports=function(){var t=function(t,e,n){for(var r=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:n}(3,r.createElement("div"));return t}()},function(t,e,n){var r=n(5);t.exports={create:function(t,e,n,o,a){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var s=n?";expires="+i.toGMTString():"",u=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+";path=/"+(o?";domain="+o:"")+(a?";secure":"");r.document.cookie=u},read:function(t){var e,n=encodeURIComponent(t)+"=",o=r.document.cookie.split(";");for(e=0;e<o.length;e++){for(var a=o[e];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return decodeURIComponent(a.substring(n.length,a.length))}return null},remove:function(t){this.create(t,"",-1)}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(){var t=void 0;return g&&(t=d.read(p)),null===t||"false"===t}function a(t){var e=o()&&t&&g;return{BVBRANDID:e?d.read("BVBRANDID"):null,BVBRANDSID:e?d.read("BVBRANDSID"):null}}function i(t){if(o()&&t&&g){var e=1/48,n=365,r=a(t);r.BVBRANDID||d.create("BVBRANDID",h.uuid(),n,t),r.BVBRANDSID||d.create("BVBRANDSID",h.uuid(),e,t)}}function s(){var t=void 0;return g&&(t=d.read(p)),t}function u(t){g&&(t=t||"."+h.getDomainWithoutSubdomain(),d.create(p,!0,m,t))}function c(t){g&&(t=t||"."+h.getDomainWithoutSubdomain(),d.create("BVBRANDID",null,-1,t),d.create("BVBRANDSID",null,-1,t))}Object.defineProperty(e,"__esModule",{value:!0}),e.firstPartyTrackingCookiesAllowed=o,e.getBrandCookies=a,e.setBrandCookies=i,e.getDoNotTrackCookie=s,e.setDoNotTrackCookie=u,e.removeFirstPartyTrackingCookies=c;var l=n(13),d=r(l),f=n(3),h=r(f),g=navigator.cookieEnabled,p="NoCookie",m=7300},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){var n=t&&t[e];return null!==n&&void 0!==n}function a(t,e){var n=e.length;if(!u.isObject(t)&&n<0)return!1;for(;n--;)if(!o(t,e[n]))return!1;return!0}function i(t){return a(t,f)}var s=n(3),u=r(s),c="Conversion",l="PII"+c,d={orderId:1,affiliation:1,total:1,tax:1,shipping:1,city:1,state:1,country:1,currency:1,items:1,locale:1,type:1,label:1,value:1,proxy:1,partnerSource:1,deploymentZone:1,TestCase:1,TestSession:1},f=["type"],h="public_",g=function(t){var e;this._data=t,this._anonymized={},this._hasPII=!1;for(e in t)t.hasOwnProperty(e)&&(d[e]||0===e.indexOf(h)?this._anonymized[e]=t[e]:this._hasPII=!0);this._hasPII===!0&&(this._anonymized.hadPII=!0)},p=g.prototype;p.containsPII=function(){return this._hasPII},p.getAnonymizedData=function(){return this._anonymized},p.getPIIData=function(){return this._data},t.exports={EVENT_CLASS:c,PII_EVENT_CLASS:l,create:function(t){return i(t)?new g(t):null}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(17),a=r(o),i=n(3),s=n(18),u=r(s),c=n(19),l=a["default"].namespace("BVA");try{l.registerProperty("trackers",{})}catch(d){}try{l.registerProperty("loadId",(0,i.loadId)())}catch(d){}try{l.registerProperty("dispatcher",new u["default"])}catch(d){var f=l.dispatcher.version,h=u["default"].prototype.version;1===c(h,f)&&(l.dispatcher=u["default"].copy(l.dispatcher))}t.exports=l},function(t,e,n){function r(t){this.name=t}var o=n(5);r.prototype.registerProperty=function(t,e){if(this.hasOwnProperty(t))throw new Error("Cannot register "+t+" because a property with that name already exists on window."+this.name);return this[t]=e,this},t.exports={namespace:function(t){if(void 0===o[t])o[t]=new r(t);else{if("object"!=typeof o[t])throw new Error("Namespace "+t+" cannot be created. A non-object variable is already assigned to window."+t);if(!(o[t]instanceof r)){r.call(o[t],t);for(var e in r.prototype)o[t][e]=r.prototype[e]}}return o[t]}}},function(t,e,n){"use strict";function r(){this.callbacks={"default":{"*":[]}}}r.prototype.registerCallback=function(t,e,n){this.callbacks[n]=this.callbacks[n]||{"*":[]},this.callbacks[n][t]=this.callbacks[n][t]||[],this.callbacks[n][t].push(e)},r.prototype.fireCallbacks=function(t,e,n){if("undefined"!=typeof this.callbacks[n]){var r=this.callbacks[n][t];r&&r.forEach(function(t){t(e)}),"*"!==t&&this.callbacks[n]["*"].forEach(function(t){t(e)})}},r.prototype.version="3.8.1",r.copy=function(t){var e=new r;return e.callbacks=t.callbacks,e},t.exports=r},function(t,e){t.exports=function(t,e){for(var n=t.split("."),r=e.split("."),o=0;o<3;o++){var a=Number(n[o]),i=Number(r[o]);if(a>i)return 1;if(i>a)return-1;if(!isNaN(a)&&isNaN(i))return 1;if(isNaN(a)&&!isNaN(i))return-1}return 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_global=__webpack_require__(5),_global2=_interopRequireDefault(_global),_logger=__webpack_require__(11),_logger2=_interopRequireDefault(_logger),vendorMap={ADOBE:"AdobeSiteCatalyst",IBM:"IBMDigitalAnalytics",GOOGLE:"GoogleAnalytics"},eventGroup="Bazaarvoice",delimiter=" : ",trackingMap={Ask:{label:["Button"]},Click:{label:["SecondaryContentLink","ViewProfileButton","Stars","ReadReviewsButton","SummaryStars","WriteReviewLabel","ReviewCount","SummaryQuestionStats","YesHelpfulVote","NoHelpfulVote","ReportLink","UserSubmittedMedia","YesVote","NoVote","Report","UserSubmittedPhoto"]},Close:{label:["Submission","SecondaryContent","UserSubmittedMedia","Search","UserSubmittedPhoto"]},Filter:{label:["1Star","2Stars","3Stars","4Stars","5Stars","Clear1Star","Clear2Stars","Clear3Stars","Clear4Stars","Clear5Stars","ClearAll"]},Hover:{label:["Histogram","Profile"]},Paginate:{label:["First","Last","Next","Prev"]},Search:{label:["UserGeneratedContent","SearchBarRatingSummary","TopicsAndReviews"]},Share:{label:["Button"]},Sort:{label:["featured","mostRecent","oldest","positive","negative","mostHelpful","mostUnhelpful","relevancy","recentQuestionsFirst","recentQuestionsLast","recentAnswersFirst","recentAnswersLast","mostAnsweredQuestionsFirst","mostAnsweredQuestionsLast","featuredQuestionsFirst","helpfulnessAnswersFirst","helpfulnessAnswersLast"]},Write:{label:["Button"]}},getSiteCatalystTracker=function(t){var e=t||"s",n=_global2["default"][e];return n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))?n:void _logger2["default"].warn(e+" bad trackerRef")},getGoogleAnalyticsTracker=function getGoogleAnalyticsTracker(vendorTracker,method){var trackerRef=vendorTracker,trackerMethod=method,tracker,trackerType="object";if(trackerRef){if(!method)if("pageTracker"===trackerRef)trackerMethod="SYNCHRONOUS";else if("_gaq"===trackerRef)trackerMethod="ASYNCHRONOUS";else{if("ga"!==trackerRef)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerMethod");
trackerMethod="UNIVERSAL"}}else if(trackerMethod&&"SYNCHRONOUS"!==trackerMethod||"object"!==("undefined"==typeof pageTracker?"undefined":_typeof(pageTracker)))if(trackerMethod&&"ASYNCHRONOUS"!==trackerMethod||"object"!==_typeof(_global2["default"]._gaq)){if(trackerMethod&&"UNIVERSAL"!==trackerMethod||"function"!=typeof _global2["default"].ga)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerRef");trackerRef="ga",trackerMethod="UNIVERSAL"}else trackerRef="_gaq",trackerMethod="ASYNCHRONOUS";else trackerRef="pageTracker",trackerMethod="SYNCHRONOUS";if("ga"!==trackerRef&&"UNIVERSAL"!==trackerMethod||(trackerType="function"),tracker=_global2["default"][trackerRef],!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType){try{tracker=eval(trackerRef)}catch(e){return}if(!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType)return void _logger2["default"].warn(trackerRef+" bad trackerRef")}return"SYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,o){tracker._trackEvent(t,e,n,r,o)}}:"ASYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,o){tracker.push(["_trackEvent",t,e,n,r,o])}}:"UNIVERSAL"===trackerMethod?{trackEvent:function(t,e,n,r,o){tracker("send","event",t,e,n,r,{nonInteraction:o})}}:void _logger2["default"].warn("getGoogleAnalyticsTracker: trackEvent could not be defined")},callWap=function(t,e){for(var n={},r=[],o=2;o<arguments.length;o++)r.push((arguments[o]||"").toString());var a=r.join("~#~");if(!n[a]){n[a]=!0;try{e.apply(t,[].slice.call(arguments,2))}catch(i){_logger2["default"].error("Error calling WAP: "+i.stack)}}},isEventTracked=function(t,e,n){if("Feature"===t&&e in trackingMap)for(var r=0;r<trackingMap[e].label.length;r++)if(trackingMap[e].label[r]===n||"ANY"===trackingMap[e].label[r])return!0;return!1},adobeSiteCatalystCallback=function(t){var e=t||{},n=getSiteCatalystTracker(e.tracker||null);return n?function(t){if(isEventTracked(t.cl,t.name,t.detail1)){var r=_global2["default"].event||_global2["default"],o=e.event,a=e.evar,i=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1),s=eventGroup+delimiter+t.bvProduct+delimiter+t.name+i;n.linkTrackEvents="event"+o,n.events="event"+o,n["eVar"+a]=s,n.linkTrackVars="events,evar"+a,n.products&&(n.linkTrackVars+=",products",n.products=n.products.replace(/([^,;]*;[^,;]*);[^,]*/g,"$1")),n.linkTrackVars+=",eVar"+a,callWap(n,n.tl,r,"o",s+delimiter+t.productId)}}:function(){}},ibmDigitalAnalyticsCallback=function(t){if("object"===_typeof(_global2["default"].cG7)&&isEventTracked(t.cl,t.name,t.detail1)){var e=_global2["default"].cG7.cM0[_global2["default"].cm_ClientID],n=eventGroup+delimiter+t.bvProduct,r=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(_global2["default"],_global2["default"].cmCreateElementTag,t.name+r,n),_global2["default"].cG7.cM0[_global2["default"].cm_ClientID]=e}},googleAnalyticsCallback=function(t){var e=t||{},n=getGoogleAnalyticsTracker(e.tracker||null,e.method);return n?function(t){var e=eventGroup+delimiter+t.bvProduct+delimiter,r=_global2["default"].location.pathname;if("PageView"===t.cl&&t.bvProduct)callWap(n,n.trackEvent,"Bazaarvoice Content Loaded",e+"Product"+t.cl,r,void 0,!0);else if(isEventTracked(t.cl,t.name,t.detail1)){var o=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(n,n.trackEvent,eventGroup+" "+t.bvProduct,e+t.name+o,r,void 0,!1)}}:function(){}};module.exports={create:function(t,e){switch(t){case vendorMap.ADOBE:return adobeSiteCatalystCallback(e);case vendorMap.IBM:return ibmDigitalAnalyticsCallback;case vendorMap.GOOGLE:return googleAnalyticsCallback(e)}throw _logger2["default"].error("Error creating vendor callback. The named vendor integration was not found."),new Error("The named vendor integration was not found.")},_getSiteCatalystTracker:getSiteCatalystTracker,_getGoogleAnalyticsTracker:getGoogleAnalyticsTracker,_isEventTracked:isEventTracked,_callWap:callWap}}]);