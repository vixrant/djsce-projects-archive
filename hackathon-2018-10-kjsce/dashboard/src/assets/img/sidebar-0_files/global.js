var btf=btf||{};+function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},c.DEFAULTS,d);this.transitioning=null;if(this.options.parent){this.$parent=b(this.options.parent)}if(this.options.group){this.group=this.options.group}if(this.options.toggle){this.toggle()}};c.DEFAULTS={toggle:true};c.prototype.dimension=function(){var d=this.$element.hasClass("width");return d?"width":"height"};c.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return}var e=b.Event("show.bs.collapse");this.$element.trigger(e);if(e.isDefaultPrevented()){return}if(this.group){var h=b('[data-toggle=collapse][data-group="'+this.group+'"]').map(function(){return this.hash?b(this.hash)[0]:b(b(this).data("target"))[0]}).filter(".in")}else{var h=this.$parent&&this.$parent.find("> .panel > .in, > .in")}if(h&&h.length){var f=h.data("bs.collapse");if(f&&f.transitioning){return}h.collapse("hide");f||h.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0);this.transitioning=1;var d=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!b.support.transition){return d.call(this)}var g=b.camelCase(["scroll",i].join("-"));this.$element.one(b.support.transition.end,b.proxy(d,this)).emulateTransitionEnd(350)[i](this.$element[0][g])};c.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return}var e=b.Event("hide.bs.collapse");this.$element.trigger(e);if(e.isDefaultPrevented()){return}var f=this.dimension();this.$element[f](this.$element[f]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var d=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!b.support.transition){return d.call(this)}this.$element[f](0).one(b.support.transition.end,b.proxy(d,this)).emulateTransitionEnd(350)};c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var a=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this);var f=g.data("bs.collapse");var e=b.extend({},c.DEFAULTS,g.data(),typeof d=="object"&&d);if(!f){g.data("bs.collapse",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.collapse.Constructor=c;b.fn.collapse.noConflict=function(){b.fn.collapse=a;return this};b(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(j){var l=b(this),d;var k=l.attr("data-target")||j.preventDefault()||(d=l.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"");var f=b(k);var h=f.data("bs.collapse");var i=h?"toggle":l.data();var m=l.attr("data-parent");var g=m&&b(m);var n=l.attr("data-group");if(l.is("[type=radio]")&&f.is(".in")){return}if(!h||!h.transitioning){if(g){g.find('[data-toggle=collapse][data-parent="'+m+'"]').not(l).addClass("collapsed")}if(n){b('[data-toggle=collapse][data-group="'+n+'"]').not(l).addClass("collapsed")}l[f.hasClass("in")?"addClass":"removeClass"]("collapsed")}f.collapse(i)})}(window.jQuery);+function(c){var b=function(e,d){this.options=d;this.$element=c(e);this.$backdrop=this.isShown=null;if(this.options.remote){this.$element.load(this.options.remote)}};b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(d){return this[!this.isShown?"show":"hide"](d)};b.prototype.show=function(g){var d=this;var f=c.Event("show.bs.modal",{relatedTarget:g});this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',c.proxy(this.hide,this));this.backdrop(function(){var i=c.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(i){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();var h=c.Event("shown.bs.modal",{relatedTarget:g});i?d.$element.find(".modal-dialog").one(c.support.transition.end,function(){d.$element.focus().trigger(h)}).emulateTransitionEnd(300):d.$element.focus().trigger(h)})};b.prototype.hide=function(d){if(d){d.preventDefault()}d=c.Event("hide.bs.modal");this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=false;this.escape();c(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.modal");c.support.transition&&this.$element.hasClass("fade")?this.$element.one(c.support.transition.end,c.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};b.prototype.enforceFocus=function(){c(document).off("focusin.bs.modal").on("focusin.bs.modal",c.proxy(function(d){if(this.$element[0]!==d.target&&!this.$element.has(d.target).length){this.$element.focus()}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",c.proxy(function(d){d.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}}};b.prototype.hideModal=function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(g){var f=this;var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&e;this.$backdrop=c('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$element.on("click.dismiss.modal",c.proxy(function(h){if(h.target!==h.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(c.support.transition.end,g).emulateTransitionEnd(150):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g).emulateTransitionEnd(150):g()}else{if(g){g()}}}};var a=c.fn.modal;c.fn.modal=function(d,e){return this.each(function(){var h=c(this);var g=h.data("bs.modal");var f=c.extend({},b.DEFAULTS,h.data(),typeof d=="object"&&d);if(!g){h.data("bs.modal",(g=new b(this,f)))}if(typeof d=="string"){g[d](e)}else{if(f.show){g.show(e)}}})};c.fn.modal.Constructor=b;c.fn.modal.noConflict=function(){c.fn.modal=a;return this};c(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var h=c(this);var f=h.attr("href");var d=c(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,"")));var g=d.data("modal")?"toggle":c.extend({remote:!/#/.test(f)&&f},d.data(),h.data());i.preventDefault();d.modal(g,this).one("hide",function(){h.is(":visible")&&h.focus()})});c(document).on("show.bs.modal",".modal",function(){c(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){c(document.body).removeClass("modal-open")})}(window.jQuery);+function(b){function a(){var e=document.createElement("bootstrap");var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in d){if(e.style[c]!==undefined){return{end:d[c]}}}}b.fn.emulateTransitionEnd=function(e){var d=false,c=this;b(this).one(b.support.transition.end,function(){d=true});var f=function(){if(!d){b(c).trigger(b.support.transition.end)}};setTimeout(f,e);return this};b(function(){b.support.transition=a()})}(window.jQuery);+function(c){var b=function(d){this.element=c(d)};b.prototype.show=function(){var j=this.element;var g=j.closest("ul:not(.dropdown-menu)");var f=j.attr("data-target");if(!f){f=j.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}if(j.parent("li").hasClass("active")){return}var h=g.find(".active:last a")[0];var i=c.Event("show.bs.tab",{relatedTarget:h});j.trigger(i);if(i.isDefaultPrevented()){return}var d=c(f);this.activate(j.parent("li"),g);this.activate(d,d.parent(),function(){j.trigger({type:"shown.bs.tab",relatedTarget:h})})};b.prototype.activate=function(f,e,i){var d=e.find("> .active");var h=i&&c.support.transition&&d.hasClass("fade");function g(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(h){f[0].offsetWidth;f.addClass("in")}else{f.removeClass("fade")}if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}i&&i()}h?d.one(c.support.transition.end,g).emulateTransitionEnd(150):g();d.removeClass("in")};var a=c.fn.tab;c.fn.tab=function(d){return this.each(function(){var f=c(this);var e=f.data("bs.tab");if(!e){f.data("bs.tab",(e=new b(this)))}if(typeof d=="string"){e[d]()}})};c.fn.tab.Constructor=b;c.fn.tab.noConflict=function(){c.fn.tab=a;return this};c(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault();c(this).tab("show")})}(window.jQuery);window.Modernizr=function(an,am,al){function H(b){ae.cssText=b}function Y(d,c){return H(ab.join(d+";")+(c||""))}function W(d,c){return typeof d===c}function U(d,c){return !!~(""+d).indexOf(c)}function S(f,c){for(var h in f){var g=f[h];if(!U(g,"-")&&ae[g]!==al){return c=="pfx"?g:!0}}return !1}function Q(g,c,j){for(var i in g){var h=c[g[i]];if(h!==al){return j===!1?g[i]:W(h,"function")?h.bind(j||c):h}}return !1}function O(g,f,j){var i=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+Z.join(i+" ")+i).split(" ");return W(f,"string")||W(f,"undefined")?S(h,f):(h=(g+" "+X.join(i+" ")+i).split(" "),Q(h,f,j))}var ak="2.6.2",aj={},ai=!0,ah=am.documentElement,ag="modernizr",af=am.createElement(ag),ae=af.style,ad,ac={}.toString,ab=" -webkit- -moz- -o- -ms- ".split(" "),aa="Webkit Moz O ms",Z=aa.split(" "),X=aa.toLowerCase().split(" "),V={},T={},R={},P=[],N=P.slice,M,K=function(v,u,t,s){var r,q,p,o,h=am.createElement("div"),g=am.body,b=g||am.createElement("body");if(parseInt(t,10)){while(t--){p=am.createElement("div"),p.id=s?s[t]:ag+(t+1),h.appendChild(p)}}return r=["&#173;",'<style id="s',ag,'">',v,"</style>"].join(""),h.id=ag,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=ah.style.overflow,ah.style.overflow="hidden",ah.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),ah.style.overflow=o),!!q},J={}.hasOwnProperty,I;!W(J,"undefined")&&!W(J.call,"undefined")?I=function(d,c){return J.call(d,c)}:I=function(d,c){return c in d&&W(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=N.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(N.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(N.call(arguments)))};return f}),V.touch=function(){var a;return"ontouchstart" in an||an.DocumentTouch&&am instanceof DocumentTouch?a=!0:K(["@media (",ab.join("touch-enabled),("),ag,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9}),a},V.cssanimations=function(){return O("animationName")},V.csstransitions=function(){return O("transition")};for(var L in V){I(V,L)&&(M=L.toLowerCase(),aj[M]=V[L](),P.push((aj[M]?"":"no-")+M))}return aj.addTest=function(e,c){if(typeof e=="object"){for(var f in e){I(e,f)&&aj.addTest(f,e[f])}}else{e=e.toLowerCase();if(aj[e]!==al){return aj}c=typeof c=="function"?c():c,typeof ai!="undefined"&&ai&&(ah.className+=" "+(c?"":"no-")+e),aj[e]=c}return aj},H(""),af=ad=null,function(aq,ap){function z(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function y(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=B[d[D]];return c||(c={},C++,d[D]=C,B[C]=c),c}function w(b,h,e){h||(h=ap);if(A){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():F.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!G.test(b)?e.frag.appendChild(d):d}function v(b,l){b||(b=ap);if(A){return b.createDocumentFragment()}l=l||x(b);var k=l.frag.cloneNode(),j=0,i=y(),h=i.length;for(;j<h;j++){k.createElement(i[j])}return k}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+y().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=ap);var d=x(b);return s.shivCSS&&!E&&!d.hasCSS&&(d.hasCSS=!!z(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),A||u(b,d),b}var ao=aq.html5||{},G=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,F=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,E,D="_html5shiv",C=0,B={},A;(function(){try{var b=ap.createElement("a");b.innerHTML="<xyz></xyz>",E="hidden" in b,A=b.childNodes.length==1||function(){ap.createElement("a");var c=ap.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){E=!0,A=!0}})();var s={elements:ao.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:ao.shivCSS!==!1,supportsUnknownElements:A,shivMethods:ao.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};aq.html5=s,t(ap)}(this,am),aj._version=ak,aj._prefixes=ab,aj._domPrefixes=X,aj._cssomPrefixes=Z,aj.testProp=function(b){return S([b])},aj.testAllProps=O,aj.testStyles=K,aj.prefixed=function(e,d,f){return d?O(e,d,f):O(e,"pfx")},ah.className=ah.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ai?" js "+P.join(" "):""),aj}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(w,v,t,s,q,p,n){function m(a){if(!g&&X(h.readyState)&&(x.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=w&&R(function(){I.removeChild(h)},50);for(var c in D[v]){D[v].hasOwnProperty(c)&&D[v][c].onload()}}}var n=n||L.errorTimeout,h=ac.createElement(w),g=0,b=0,x={t:t,s:v,e:q,a:p,x:n};1===D[v]&&(b=1,D[v]=[]),"object"==w?h.data=v:(h.src=v,h.type=w),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){m.call(this,b)},O.splice(s,0,x),"img"!=w&&(b||2===D[v]?(I.insertBefore(h,J?null:Q),R(m,n)):D[v].push(h))}function U(g,e,j,i,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,j,i,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(i){var i=i.split("!"),h=E.length,q=i.pop(),p=i.length,q={url:q,origUrl:q,prefixes:i},o,l,j;for(l=0;l<p;l++){j=i[l].split("="),(o=C[j.shift()])&&(q=o(q,j))}for(l=0;l<h;l++){q=E[l](q)}return q}function n(b,s,r,q,p){var o=c(b),l=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(s&&(s=aa(s)?s:s[b]||s[q]||s[b.split("/").pop().split("?")[0]]),o.instead?o.instead(b,s,r,q,p):(D[o.url]?o.noexec=!0:D[o.url]=1,r.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":ab,o.noexec,o.attrs,o.timeout),(aa(s)||aa(l))&&r.load(function(){T(),s&&s(o.origUrl,p,q),l&&l(o.origUrl,p,q),D[o.url]=2})))}function m(w,v){function u(b,h){if(b){if(Z(b)){h||(r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}),n(b,r,v,0,t)}else{if(Object(b)===b){for(g in o=function(){var a=0,i;for(i in b){b.hasOwnProperty(i)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--o&&(aa(r)?r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}:r[g]=function(i){return function(){var a=[].slice.call(arguments);i&&i.apply(this,a),p()}}(q[g])),n(b[g],r,v,g,t))}}}}else{!h&&p()}}var t=!!w.test,s=w.load||w.both,r=w.callback||Y,q=r,p=w.complete||Y,o,g;u(t?w.yep:w.nope,!!s),s&&u(s)}var k,f,d=this.yepnope.loader;if(Z(e)){n(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?n(f,0,d,0):F(f)?L(f):Object(f)===f&&m(f,d)}}else{Object(e)===e&&m(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(r,q,p,n,m,h){var g=ac.createElement("script"),f,b,n=n||L.errorTimeout;g.src=r;for(b in p){g.setAttribute(b,p[b])}q=h?W:q||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,q(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,q(1))},n),m?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,n,m,l,k,h){var l=ac.createElement("link"),f,n=h?W:n||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in m){l.setAttribute(f,m[f])}k||(Q.parentNode.insertBefore(l,Q),R(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/* jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */
(function(a){a.extend(a.fn,{validate:function(c){if(!this.length){return c&&c.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0}var b=a.data(this[0],"validator");return b?b:(this.attr("novalidate","novalidate"),b=new a.validator(c,this[0]),a.data(this[0],"validator",b),b.settings.onsubmit&&(this.validateDelegate(":submit","click",function(d){b.settings.submitHandler&&(b.submitButton=d.target),a(d.target).hasClass("cancel")&&(b.cancelSubmit=!0),void 0!==a(d.target).attr("formnovalidate")&&(b.cancelSubmit=!0)}),this.submit(function(f){function d(){var e;return b.settings.submitHandler?(b.submitButton&&(e=a("<input type='hidden'/>").attr("name",b.submitButton.name).val(a(b.submitButton).val()).appendTo(b.currentForm)),b.settings.submitHandler.call(b,b.currentForm,f),b.submitButton&&e.remove(),!1):!0}return b.settings.debug&&f.preventDefault(),b.cancelSubmit?(b.cancelSubmit=!1,d()):b.form()?b.pendingRequest?(b.formSubmitted=!0,!1):d():(b.focusInvalid(),!1)})),b)},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}var c=!0,b=a(this[0].form).validate();return this.each(function(){c=c&&b.element(this)}),c},removeAttrs:function(d){var b={},c=this;return a.each(d.split(/\s/),function(f,g){b[g]=c.attr(g),c.removeAttr(g)}),b},rules:function(h,g){var m=this[0];if(h){var b=a.data(m.form,"validator").settings,d=b.rules,j=a.validator.staticRules(m);switch(h){case"add":a.extend(j,a.validator.normalizeRule(g)),delete j.messages,d[m.name]=j,g.messages&&(b.messages[m.name]=a.extend(b.messages[m.name],g.messages));break;case"remove":if(!g){return delete d[m.name],j}var k={};return a.each(g.split(/\s/),function(i,l){k[l]=j[l],delete j[l]}),k}}var c=a.validator.normalizeRules(a.extend({},a.validator.classRules(m),a.validator.attributeRules(m),a.validator.dataRules(m),a.validator.staticRules(m)),m);if(c.required){var f=c.required;delete c.required,c=a.extend({required:f},c)}return c}}),a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}}),a.validator=function(c,b){this.settings=a.extend(!0,{},a.validator.defaults,c),this.currentForm=b,this.init()},a.validator.format=function(c,b){return 1===arguments.length?function(){var d=a.makeArray(arguments);return d.unshift(c),a.validator.format.apply(this,d)}:(arguments.length>2&&b.constructor!==Array&&(b=a.makeArray(arguments).slice(1)),b.constructor!==Array&&(b=[b]),a.each(b,function(e,d){c=c.replace(RegExp("\\{"+e+"\\}","g"),function(){return d})}),c)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"span",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(b){this.lastActive=b,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(b)).hide())},onfocusout:function(b){this.checkable(b)||!(b.name in this.submitted)&&this.optional(b)||this.element(b)},onkeyup:function(b,c){(9!==c.which||""!==this.elementValue(b))&&(b.name in this.submitted||b===this.lastElement)&&this.element(b)},onclick:function(b){b.name in this.submitted?this.element(b):b.parentNode.name in this.submitted&&this.element(b.parentNode)},highlight:function(d,b,c){"radio"===d.type?this.findByName(d.name).addClass(b).removeClass(c):a(d).addClass(b).removeClass(c)},unhighlight:function(d,b,c){"radio"===d.type?this.findByName(d.name).removeClass(b).addClass(c):a(d).removeClass(b).addClass(c)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function d(h){var f=a.data(this[0].form,"validator"),g="on"+h.type.replace(/^validate/,"");f.settings[g]&&f.settings[g].call(f,this[0],h)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var b=this.groups={};a.each(this.settings.groups,function(g,f){"string"==typeof f&&(f=f.split(/\s/)),a.each(f,function(e,h){b[h]=g})});var c=this.settings.rules;a.each(c,function(g,f){c[g]=a.validator.normalizeRule(f)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",d).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",d),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=this.currentElements=this.elements();c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c)),this.lastElement=c,this.prepareElement(c),this.currentElements=a(c);var b=this.check(c)!==!1;return b?delete this.invalid[c.name]:this.invalid[c.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),b},showErrors:function(c){if(c){a.extend(this.errorMap,c),this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(c){var d=0;for(var b in c){d++}return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(c){return c.element.name===b.name}).length&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in b||!c.objectLength(a(this).rules())?!1:(b[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset(),this.toHide=this.errorsFor(b)},elementValue:function(d){var b=a(d).attr("type"),c=a(d).val();return"radio"===b||"checkbox"===b?a("input[name='"+a(d).attr("name")+"']:checked").val():"string"==typeof c?c.replace(/\r/g,""):c},check:function(h){h=this.validationTargetFor(this.clean(h));var d,f=a(h).rules(),g=!1,k=this.elementValue(h);for(var b in f){var c={method:b,parameters:f[b]};try{if(d=a.validator.methods[b].call(this,k,h,c.parameters),"dependency-mismatch"===d){g=!0;continue}if(g=!1,"pending"===d){return this.toHide=this.toHide.not(this.errorsFor(h)),void 0}if(!d){return this.formatAndAdd(h,c),!1}}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+h.id+", check the '"+c.method+"' method.",j),j}}return g?void 0:(this.objectLength(f)&&this.successList.push(h),!0)},customDataMessage:function(c,b){return a(c).data("msg-"+b.toLowerCase())||c.attributes&&a(c).attr("data-msg-"+b.toLowerCase())},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor===String?b:b[d])},findDefined:function(){for(var b=0;arguments.length>b;b++){if(void 0!==arguments[b]){return arguments[b]}}return void 0},defaultMessage:function(c,b){return this.findDefined(this.customMessage(c.name,b),this.customDataMessage(c,b),!this.settings.ignoreTitle&&c.title||void 0,a.validator.messages[b],"<strong>Warning: No message defined for "+c.name+"</strong>")},formatAndAdd:function(f,b){var c=this.defaultMessage(f,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,f):d.test(c)&&(c=a.validator.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:f}),this.errorMap[f.name]=c,this.submitted[f.name]=c},addWrapper:function(b){return this.settings.wrapper&&(b=b.add(b.parent(this.settings.wrapper))),b},defaultShowErrors:function(){var c,d;for(c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(d,b){var c=this.errorsFor(d);c.length?(c.removeClass(this.settings.validClass).addClass(this.settings.errorClass),c.html(b)):(c=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(d)).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(c).length||(this.settings.errorPlacement?this.settings.errorPlacement(c,a(d)):c.insertAfter(d))),!b&&this.settings.success&&(c.text(""),"string"==typeof this.settings.success?c.addClass(this.settings.success):this.settings.success(c,d)),this.toShow=this.toShow.add(c)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]),b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(b,c){return this.dependTypes[typeof b]?this.dependTypes[typeof b](b,c):!0},dependTypes:{"boolean":function(b){return b},string:function(c,b){return !!a(c,b.form).length},"function":function(b,c){return b(c)}},optional:function(c){var b=this.elementValue(c);return !a.validator.methods.required.call(this,b,c)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,this.pending[b.name]=!0)},stopRequest:function(c,b){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[c.name],b&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!b&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(c,b){c.constructor===String?this.classRuleSettings[c]=b:a.extend(this.classRuleSettings,c)},classRules:function(d){var b={},c=a(d).attr("class");return c&&a.each(c.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(b,a.validator.classRuleSettings[this])}),b},attributeRules:function(g){var c={},d=a(g),f=d[0].getAttribute("type");for(var h in a.validator.methods){var b;"required"===h?(b=d.get(0).getAttribute(h),""===b&&(b=!0),b=!!b):b=d.attr(h),/min|max/.test(h)&&(null===f||/number|range|text/.test(f))&&(b=Number(b)),b?c[h]=b:f===h&&"range"!==f&&(c[h]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},dataRules:function(f){var b,c,d={},g=a(f);for(b in a.validator.methods){c=g.data("rule-"+b.toLowerCase()),void 0!==c&&(d[b]=c)}return d},staticRules:function(d){var b={},c=a.data(d.form,"validator");return c.settings.rules&&(b=a.validator.normalizeRule(c.settings.rules[d.name])||{}),b},normalizeRules:function(c,b){return a.each(c,function(d,e){if(e===!1){return delete c[d],void 0}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,b.form).length;break;case"function":f=e.depends.call(b,b)}f?c[d]=void 0!==e.param?e.param:!0:delete c[d]}}),a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e}),a.each(["minlength","maxlength"],function(){c[this]&&(c[this]=Number(c[this]))}),a.each(["rangelength","range"],function(){var d;c[this]&&(a.isArray(c[this])?c[this]=[Number(c[this][0]),Number(c[this][1])]:"string"==typeof c[this]&&(d=c[this].split(/[\s,]+/),c[this]=[Number(d[0]),Number(d[1])]))}),a.validator.autoCreateRanges&&(c.min&&c.max&&(c.range=[c.min,c.max],delete c.min,delete c.max),c.minlength&&c.maxlength&&(c.rangelength=[c.minlength,c.maxlength],delete c.minlength,delete c.maxlength)),c},normalizeRule:function(c){if("string"==typeof c){var b={};a.each(c.split(/\s/),function(){b[this]=!0}),c=b}return c},addMethod:function(d,b,c){a.validator.methods[d]=b,a.validator.messages[d]=void 0!==c?c:a.validator.messages[d],3>b.length&&a.validator.addClassRules(d,a.validator.normalizeRule(d))},methods:{required:function(f,b,c){if(!this.depend(c,b)){return"dependency-mismatch"}if("select"===b.nodeName.toLowerCase()){var d=a(b).val();return d&&d.length>0}return this.checkable(b)?this.getLength(f,b)>0:a.trim(f).length>0},email:function(b,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},url:function(b,c){return this.optional(c)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},date:function(b,c){return this.optional(c)||!/Invalid|NaN/.test(""+new Date(b))},dateISO:function(b,c){return this.optional(c)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(b)},number:function(b,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(b,c){return this.optional(c)||/^\d+$/.test(b)},creditcard:function(d,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(d)){return !1}var c=0,f=0,g=!1;d=d.replace(/\D/g,"");for(var j=d.length-1;j>=0;j--){var b=d.charAt(j);f=parseInt(b,10),g&&(f*=2)>9&&(f-=9),c+=f,g=!g}return 0===c%10},minlength:function(f,b,c){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),b);return this.optional(b)||d>=c},maxlength:function(f,b,c){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),b);return this.optional(b)||c>=d},rangelength:function(f,b,c){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),b);return this.optional(b)||d>=c[0]&&c[1]>=d},min:function(c,d,b){return this.optional(d)||c>=b},max:function(c,d,b){return this.optional(d)||b>=c},range:function(c,d,b){return this.optional(d)||c>=b[0]&&b[1]>=c},equalTo:function(f,b,c){var d=a(c);return this.settings.onfocusout&&d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()}),f===d.val()},remote:function(g,c,d){if(this.optional(c)){return"dependency-mismatch"}var f=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),f.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=f.message,d="string"==typeof d&&{url:d}||d,f.old===g){return f.valid}f.old=g;var h=this;this.startRequest(c);var b={};return b[c.name]=g,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:b,success:function(k){h.settings.messages[c.name].remote=f.originalMessage;var i=k===!0||"true"===k;if(i){var j=h.formSubmitted;h.prepareElement(c),h.formSubmitted=j,h.successList.push(c),delete h.invalid[c.name],h.showErrors()}else{var m={},e=k||h.defaultMessage(c,"remote");m[c.name]=f.message=a.isFunction(e)?e(g):e,h.invalid[c.name]=!0,h.showErrors(m)}f.valid=i,h.stopRequest(c,i)}},d)),"pending"}}}),a.format=a.validator.format})(jQuery),function(b){var c={};if(b.ajaxPrefilter){b.ajaxPrefilter(function(e,d,f){var g=e.port;"abort"===e.mode&&(c[g]&&c[g].abort(),c[g]=f)})}else{var a=b.ajax;b.ajax=function(d){var e=("mode" in d?d:b.ajaxSettings).mode,f=("port" in d?d:b.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=a.apply(this,arguments),c[f]):a.apply(this,arguments)}}}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(d,b,c){return this.bind(b,function(e){var f=a(e.target);return f.is(d)?c.apply(f,arguments):void 0})}})}(jQuery);jQuery.validator.addMethod("oneFromGroup",function(f,e,c){var d=this,a=c,b=$(a,e.form).filter(function(){return d.elementValue(this)}).length>=1;return b},jQuery.format("Please fill at least {0} of these fields."));jQuery.validator.addMethod("date",function(b,a){return/^\d{2}\/\d{2}\/\d{4}$/.test(b)},"Please enter a valid date");var btf=btf||{};btf.model=btf.model||{};btf.model.ValidationConfig=function(a){this.ignore=":hidden, .ignore";this.errorClass="help-block p";this.onkeyup=false;this.errorPlacement=function(c,b){b.parent().append(c)};this.highlight=function(b){$(b).parent().addClass("has-error")};this.success=function(b){b.parent().removeClass("has-error")};if(typeof a==="object"){for(prop in a){if(a.hasOwnProperty(prop)){this[prop]=a[prop]}}}};$(function(){$(".validate").each(function(){var a={};if($(this).attr("action").match(/ProcessPayment.ice/)){a.submitHandler=function(b){var c=new btf.checkout.FormOverlay();c.display();b.submit()}}$(this).validate(new btf.model.ValidationConfig(a))})});jQuery.cookie=function(b,j,m){var e,f,l,g,a,d,k,c,h;if(typeof j!=="undefined"){m=m||{};if(j===null){j="";m.expires=-1}e="";if(m.expires&&(typeof m.expires==="number"||m.expires.toUTCString)){if(typeof m.expires==="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}l=m.path?"; path="+m.path:"";g=m.domain?"; domain="+m.domain:"";a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{d=null;if(document.cookie&&document.cookie!==""){k=document.cookie.split(";");for(h=0;h<k.length;h++){c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)===(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};function setCategoryCookie(){$.cookie("fcp_last_category",window.location.href,{expires:31,path:"/"})}
/*
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(a,b){if(typeof exports==="object"&&exports){b(exports)}else{var c={};b(c);if(typeof define==="function"&&define.amd){define(c)}else{a.Mustache=c}}}(this,function(a){var f=/\s*/;var m=/\s+/;var k=/\S/;var i=/\s*=/;var o=/\s*\}/;var u=/#|\^|\/|>|\{|&|=|!/;var g=RegExp.prototype.test;function t(A,z){return g.call(A,z)}function h(z){return !t(k,z)}var w=Object.prototype.toString;var l=Array.isArray||function(z){return w.call(z)==="[object Array]"};function b(z){return typeof z==="function"}function e(z){return z.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(z){return String(z).replace(/[&<>"'\/]/g,function(A){return d[A]})}function v(z){this.string=z;this.tail=z;this.pos=0}v.prototype.eos=function(){return this.tail===""};v.prototype.scan=function(B){var A=this.tail.match(B);if(A&&A.index===0){var z=A[0];this.tail=this.tail.substring(z.length);this.pos+=z.length;return z}return""};v.prototype.scanUntil=function(B){var A=this.tail.search(B),z;switch(A){case -1:z=this.tail;this.tail="";break;case 0:z="";break;default:z=this.tail.substring(0,A);this.tail=this.tail.substring(A)}this.pos+=z.length;return z};function s(z,A){this.view=z==null?{}:z;this.parent=A;this._cache={".":this.view}}s.make=function(z){return(z instanceof s)?z:new s(z)};s.prototype.push=function(z){return new s(z,this)};s.prototype.lookup=function(z){var C;if(z in this._cache){C=this._cache[z]}else{var B=this;while(B){if(z.indexOf(".")>0){C=B.view;var D=z.split("."),A=0;while(C!=null&&A<D.length){C=C[D[A++]]}}else{C=B.view[z]}if(C!=null){break}B=B.parent}this._cache[z]=C}if(b(C)){C=C.call(this.view)}return C};function q(){this.clearCache()}q.prototype.clearCache=function(){this._cache={};this._partialCache={}};q.prototype.compile=function(B,z){var A=this._cache[B];if(!A){var C=a.parse(B,z);A=this._cache[B]=this.compileTokens(C,B)}return A};q.prototype.compilePartial=function(A,C,z){var B=this.compile(C,z);this._partialCache[A]=B;return B};q.prototype.getPartial=function(z){if(!(z in this._partialCache)&&this._loadPartial){this.compilePartial(z,this._loadPartial(z))}return this._partialCache[z]};q.prototype.compileTokens=function(B,A){var z=this;return function(C,E){if(E){if(b(E)){z._loadPartial=E}else{for(var D in E){z.compilePartial(D,E[D])}}}return p(B,z,s.make(C),A)}};q.prototype.render=function(B,z,A){return this.compile(B)(z,A)};function p(H,B,z,K){var E="";function A(N){return B.render(N,z)}var C,I,J;for(var F=0,G=H.length;F<G;++F){C=H[F];I=C[1];switch(C[0]){case"#":J=z.lookup(I);if(typeof J==="object"||typeof J==="string"){if(l(J)){for(var D=0,M=J.length;D<M;++D){E+=p(C[4],B,z.push(J[D]),K)}}else{if(J){E+=p(C[4],B,z.push(J),K)}}}else{if(b(J)){var L=K==null?null:K.slice(C[3],C[5]);J=J.call(z.view,L,A);if(J!=null){E+=J}}else{if(J){E+=p(C[4],B,z,K)}}}break;case"^":J=z.lookup(I);if(!J||(l(J)&&J.length===0)){E+=p(C[4],B,z,K)}break;case">":J=B.getPartial(I);if(b(J)){E+=J(z)}break;case"&":J=z.lookup(I);if(J!=null){E+=J}break;case"name":J=z.lookup(I);if(J!=null){E+=a.escape(J)}break;case"text":E+=I;break}}return E}function y(F){var A=[];var E=A;var G=[];var C;for(var B=0,z=F.length;B<z;++B){C=F[B];switch(C[0]){case"#":case"^":G.push(C);E.push(C);E=C[4]=[];break;case"/":var D=G.pop();D[5]=C[2];E=G.length>0?G[G.length-1][4]:A;break;default:E.push(C)}}return A}function c(E){var B=[];var D,A;for(var C=0,z=E.length;C<z;++C){D=E[C];if(D){if(D[0]==="text"&&A&&A[0]==="text"){A[1]+=D[1];A[3]=D[3]}else{A=D;B.push(D)}}}return B}function r(z){return[new RegExp(e(z[0])+"\\s*"),new RegExp("\\s*"+e(z[1]))]}function x(P,F){P=P||"";F=F||a.tags;if(typeof F==="string"){F=F.split(m)}if(F.length!==2){throw new Error("Invalid tags: "+F.join(", "))}var J=r(F);var B=new v(P);var H=[];var G=[];var E=[];var Q=false;var O=false;function N(){if(Q&&!O){while(E.length){delete G[E.pop()]}}else{E=[]}Q=false;O=false}var C,A,I,K,D,z;while(!B.eos()){C=B.pos;I=B.scanUntil(J[0]);if(I){for(var L=0,M=I.length;L<M;++L){K=I.charAt(L);if(h(K)){E.push(G.length)}else{O=true}G.push(["text",K,C,C+1]);C+=1;if(K=="\n"){N()}}}if(!B.scan(J[0])){break}Q=true;A=B.scan(u)||"name";B.scan(f);if(A==="="){I=B.scanUntil(i);B.scan(i);B.scanUntil(J[1])}else{if(A==="{"){I=B.scanUntil(new RegExp("\\s*"+e("}"+F[1])));B.scan(o);B.scanUntil(J[1]);A="&"}else{I=B.scanUntil(J[1])}}if(!B.scan(J[1])){throw new Error("Unclosed tag at "+B.pos)}D=[A,I,C,B.pos];G.push(D);if(A==="#"||A==="^"){H.push(D)}else{if(A==="/"){z=H.pop();if(!z){throw new Error('Unopened section "'+I+'" at '+C)}if(z[1]!==I){throw new Error('Unclosed section "'+z[1]+'" at '+C)}}else{if(A==="name"||A==="{"||A==="&"){O=true}else{if(A==="="){F=I.split(m);if(F.length!==2){throw new Error("Invalid tags at "+C+": "+F.join(", "))}J=r(F)}}}}}z=H.pop();if(z){throw new Error('Unclosed section "'+z[1]+'" at '+B.pos)}return y(c(G))}a.name="mustache.js";a.version="0.7.3";a.tags=["{{","}}"];a.Scanner=v;a.Context=s;a.Writer=q;a.parse=x;a.escape=n;var j=new q();a.clearCache=function(){return j.clearCache()};a.compile=function(A,z){return j.compile(A,z)};a.compilePartial=function(A,B,z){return j.compilePartial(A,B,z)};a.compileTokens=function(A,z){return j.compileTokens(A,z)};a.render=function(B,z,A){return j.render(B,z,A)};a.to_html=function(C,A,B,D){var z=a.render(C,A,B);if(b(D)){D(z)}else{return z}}}));btf.data=btf.data||{};btf.data.registry=(function(){var a={};return{set:function(b,c){a[b]=c},get:function(b){return a[b]}}}());btf.data.ssn=function(b,a){return $.ajax({url:"/pws/ssnJavaScript.jsp",dataType:"json",cache:false,success:function(c){if(b){b.call(a||window,c)}$(document.body).trigger("ssnload",c)}})};var btf=btf||{};btf.forms=btf.forms||{};btf.forms.formAdjustments=(function(){function a(){var b=$("#customer_address_id");if(b.val()){$("a.accountLink","#billing_select_address_element").attr("href","/pws/secure/EditCheckoutAddress.ice?id="+b.val())}b.unbind("change").change(function(){a()})}return{editAddressLink:a}}());var btf=btf||{};btf.utils=btf.utils||{};btf.utils.templateLoader=(function(){var c=(/MSIE 9/i.test(navigator.userAgent)||/Version\/([5-9])\./i.test(navigator.userAgent))?location.protocol+"//farrowandball.btxmedia.com/pws/javascript/templates/":"/pws/javascript/templates/",d=".tpl",b=Mustache.compile,a={};return{load:function(f,g){if(typeof f==="string"){f=[f]}var e=$.map(f,function(h){return a[h]||$.ajax({url:c+h+d,dataType:"text"}).then(function(i){return a[h]=b?b(i):i})});return $.when.apply($,e).done(g)},config:function(e){c=e.prefix||c;d=e.suffix||d;b=e.compiler||b},get:function(e){return a[e]||new ReferenceError("Template "+e+", has not been loaded.")}}}());btf=btf||{};btf.basket=btf.basket||{};btf.basket.ajaxBasket=function(){btf.utils.templateLoader.load("basketResponse");$('[action="/pws/UpdateBasket.ice"]').attr("action","/pws/AJUpdateBasket.ice").submit(function(){var b=$(this),a=$("#add-to-bag").find("fieldset").last();b.addClass("loading");$(".basket-response").remove();$.post(b.attr("action"),b.serialize(),function(e){var c=btf.utils.templateLoader.get("basketResponse"),d=$(c(JSON.parse(e))).hide();$(".basket-response").remove();a.prepend(d);d.animate({opacity:"toggle",height:"toggle"},400);if(!$("#product-tabs").is(":visible")){$("html, body").animate({scrollTop:$(".product-selection-fields").offset().top+"px"},400)}btf.data.ssn(function(h){h.i18n=h.i18n||{};h.i18n.basket=h.i18n.basket||{};var f=parseFloat(basketPrompt).toFixed(2),i=parseFloat(h.basket.totals.subtotalval).toFixed(2),g=(f-i).toFixed(2);if(g>0){h.i18n.basket.BasketPrompt=h.global.currencySymbol+g.toString()}else{h.i18n.basket.BasketPrompt=""}btf.minibasket.render(h);btf.minibasket.show(4000);b.removeClass("loading")})});return false})};var btf;btf=btf||{};btf.minibasket=(function(){var c=$("#mini_basket");function b(){c.on("click",".mb-prod-remove",function(i){var h=$(this),g=h.parents(".mb-prod"),f=h.attr("href");if(!$("body").hasClass("checkout")){i.preventDefault();$.ajax({url:f,success:function(){setTimeout(function(){if($("body").hasClass("checkout")||$("body").hasClass("ly_basket")){window.location.reload()}else{btf.minibasket.update()}},500)},error:function(){window.location.reload()}})}})}function d(){var i,g,j,l,n=1,f,k,e,m,h;c.on("click",".mb-arrow",function(){i=$(".scroll",c).find(".mb-prod-list");if(!$(this).hasClass("disabled")&&!i.is(":animated")){j=$(".mb-arrow",c);l=$(".mb-prod",c);e=l.length-1;m=$(this).hasClass("mb-arrow-up")?"up":"down";h=m==="up"?"+=":"-=";k=m==="up"?n-2:n+1;f=m==="up"?n-1:n;g=$(l[f]);if((m==="up"&&k>=0)||(m==="down"&&k<=e)){i.animate({marginTop:h+g.outerHeight(true)+"px"});if(m==="up"){n--}else{n++}if(k===0){j.filter(".mb-arrow-up").addClass("disabled");j.filter(".mb-arrow-down").removeClass("disabled")}else{if(k===e){j.filter(".mb-arrow-down").addClass("disabled");j.filter(".mb-arrow-up").removeClass("disabled")}else{j.removeClass("disabled")}}}}})}function a(){c.on("mouseenter mouseleave",function(e){if(!btf.utils.responsive.matchMedia(btf.utils.responsive.images.media.DESKTOP)){return false}if(e.type==="mouseenter"){btf.minibasket.show()}else{btf.minibasket.hide(500)}})}return{render:function(e){c.html(btf.utils.templateLoader.get("basketCount")(e));c.append(btf.utils.templateLoader.get("minibasket")(e))},show:function(e){if(!btf.utils.responsive.matchMedia(btf.utils.responsive.images.media.HANDHELD)){clearTimeout(btf.minibasket.hideTimer);c.addClass("active");c.find("#mini_basket_popup").slideDown(500,function(){if(e>0){window.minibasketTimer=setTimeout(function(){btf.minibasket.hide()},e)}});btf.ui.slideToTop()}},hide:function(e){btf.minibasket.hideTimer=setTimeout(function(){c.find("#mini_basket_popup").hide();c.removeClass("active")},e||0)},init:function(){a();b();d()}}}());var Hogan={};(function(v,u){function n(b){return String(b===null||b===undefined?"":b)}function m(b){return b=n(b),o.test(b)?b.replace(t,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(q,"&#39;").replace(p,"&quot;"):b}v.Template=function(b,h,g,f){this.r=b||this.r,this.c=g,this.options=f,this.text=h||"",this.buf=u?[]:""},v.Template.prototype={r:function(e,d,f){return""},v:m,t:n,render:function(a,f,e){return this.ri([a],f||{},e)},ri:function(e,d,f){return this.r(e,d,f)},rp:function(g,f,j,i){var h=j[g];return h?(this.c&&typeof h=="string"&&(h=this.c.compile(h,this.options)),h.ri(f,j,i)):""},rs:function(g,f,j){var i=g[g.length-1];if(!l(i)){j(g,f,this);return}for(var h=0;h<i.length;h++){g.push(i[h]),j(g,f,this),g.pop()}},s:function(j,i,A,z,y,x,w){var k;return l(j)&&j.length===0?!1:(typeof j=="function"&&(j=this.ls(j,i,A,z,y,x,w)),k=j===""||!!j,!z&&k&&i&&i.push(typeof j=="object"?j:i[i.length-1]),k)},d:function(j,i,A,z){var y=j.split("."),x=this.f(y[0],i,A,z),w=null;if(j==="."&&l(i[i.length-2])){return i[i.length-1]}for(var k=1;k<y.length;k++){x&&typeof x=="object"&&y[k] in x?(w=x,x=x[y[k]]):x=""}return z&&!x?!1:(!z&&typeof x=="function"&&(i.push(w),x=this.lv(x,i,A),i.pop()),x)},f:function(j,i,A,z){var y=!1,x=null,w=!1;for(var k=i.length-1;k>=0;k--){x=i[k];if(x&&typeof x=="object"&&j in x){y=x[j],w=!0;break}}return w?(!z&&typeof y=="function"&&(y=this.lv(y,i,A)),y):z?!1:""},ho:function(i,h,y,x,w){var k=this.c,j=this.options;j.delimiters=w;var x=i.call(h,x);return x=x==null?String(x):x.toString(),this.b(k.compile(x,j).render(h,y)),!1},b:u?function(b){this.buf.push(b)}:function(b){this.buf+=b},fl:u?function(){var b=this.buf.join("");return this.buf=[],b}:function(){var b=this.buf;return this.buf="",b},ls:function(C,B,A,z,y,x,w){var k=B[B.length-1],j=null;if(!z&&this.c&&C.length>0){return this.ho(C,k,A,this.text.substring(y,x),w)}j=C.call(k);if(typeof j=="function"){if(z){return !0}if(this.c){return this.ho(j,k,A,this.text.substring(y,x),w)}}return j},lv:function(g,f,j){var i=f[f.length-1],h=g.call(i);if(typeof h=="function"){h=n(h.call(i));if(this.c&&~h.indexOf("{{")){return this.c.compile(h,this.options).render(i,j)}}return n(h)}};var t=/&/g,s=/</g,r=/>/g,q=/\'/g,p=/\"/g,o=/[&<>\"\']/,l=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(R){function K(b){b.n.substr(b.n.length-1)==="}"&&(b.n=b.n.substring(0,b.n.length-1))}function J(b){return b.trim?b.trim():b.replace(/^\s*|\s*$/g,"")}function I(g,f,j){if(f.charAt(j)!=g.charAt(0)){return !1}for(var i=1,h=g.length;i<h;i++){if(f.charAt(j+i)!=g.charAt(i)){return !1}}return !0}function H(i,h,n,m){var l=[],k=null,j=null;while(i.length>0){j=i.shift();if(j.tag=="#"||j.tag=="^"||G(j,m)){n.push(j),j.nodes=H(i,j.tag,n,m),l.push(j)}else{if(j.tag=="/"){if(n.length===0){throw new Error("Closing tag without opener: /"+j.n)}k=n.pop();if(j.n!=k.n&&!F(j.n,k.n,m)){throw new Error("Nesting error: "+k.n+" vs. "+j.n)}return k.end=j.i,l}l.push(j)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return l}function G(f,e){for(var h=0,g=e.length;h<g;h++){if(e[h].o==f.n){return f.tag="#",!0}}}function F(g,f,j){for(var i=0,h=j.length;i<h;i++){if(j[i].c==g&&j[i].o==f){return !0}}}function E(b){return b.replace(M,"\\\\").replace(P,'\\"').replace(O,"\\n").replace(N,"\\r")}function D(b){return ~b.indexOf(".")?"d":"f"}function C(g){var f="";for(var j=0,i=g.length;j<i;j++){var h=g[j].tag;h=="#"?f+=B(g[j].nodes,g[j].n,D(g[j].n),g[j].i,g[j].end,g[j].otag+" "+g[j].ctag):h=="^"?f+=A(g[j].nodes,g[j].n,D(g[j].n)):h=="<"||h==">"?f+=z(g[j]):h=="{"||h=="&"?f+=y(g[j].n,D(g[j].n)):h=="\n"?f+=w('"\\n"'+(g.length-1==j?"":" + i")):h=="_v"?f+=x(g[j].n,D(g[j].n)):h===undefined&&(f+=w('"'+E(g[j])+'"'))}return f}function B(h,g,l,k,j,i){return"if(_.s(_."+l+'("'+E(g)+'",c,p,1),c,p,0,'+k+","+j+',"'+i+'")){_.rs(c,p,function(c,p,_){'+C(h)+"});c.pop();}"}function A(e,d,f){return"if(!_.s(_."+f+'("'+E(d)+'",c,p,1),c,p,1,0,0,"")){'+C(e)+"};"}function z(b){return'_.b(_.rp("'+E(b.n)+'",c,p,"'+(b.indent||"")+'"));'}function y(d,c){return"_.b(_.t(_."+c+'("'+E(d)+'",c,p,0)));'}function x(d,c){return"_.b(_.v(_."+c+'("'+E(d)+'",c,p,0)));'}function w(b){return"_.b("+b+");"}var Q=/\S/,P=/\"/g,O=/\n/g,N=/\r/g,M=/\\/g,L={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};R.scan=function(af,ae){function h(){W.length>0&&(V.push(new String(W)),W="")}function g(){var d=!0;for(var e=S;e<V.length;e++){d=V[e].tag&&L[V[e].tag]<L._v||!V[e].tag&&V[e].match(Q)===null;if(!d){return !1}}return d}function b(f,e){h();if(f&&g()){for(var l=S,k;l<V.length;l++){V[l].tag||((k=V[l+1])&&k.tag==">"&&(k.indent=V[l].toString()),V.splice(l,1))}}else{e||V.push({tag:"\n"})}U=!1,S=V.length}function a(k,f){var n="="+i,m=k.indexOf(n,f),l=J(k.substring(k.indexOf("=",f)+1,m)).split(" ");return j=l[0],i=l[1],m+n.length-1}var ad=af.length,ac=0,ab=1,aa=2,Z=ac,Y=null,X=null,W="",V=[],U=!1,T=0,S=0,j="{{",i="}}";ae&&(ae=ae.split(" "),j=ae[0],i=ae[1]);for(T=0;T<ad;T++){Z==ac?I(j,af,T)?(--T,h(),Z=ab):af.charAt(T)=="\n"?b(U):W+=af.charAt(T):Z==ab?(T+=j.length-1,X=L[af.charAt(T+1)],Y=X?af.charAt(T+1):"_v",Y=="="?(T=a(af,T),Z=ac):(X&&T++,Z=aa),U=T):I(i,af,T)?(V.push({tag:Y,n:J(W),otag:j,ctag:i,i:Y=="/"?U-i.length:T+j.length}),W="",T+=i.length-1,Z=ac,Y=="{"&&(i=="}}"?T++:K(V[V.length-1]))):W+=af.charAt(T)}return b(U,!0),V},R.generate=function(a,h,g){var f='var _=this;_.b(i=i||"");'+C(a)+"return _.fl();";return g.asString?"function(c,p,i){"+f+";}":new R.Template(new Function("c","p","i",f),h,R,g)},R.parse=function(e,d,f){return f=f||{},H(e,"",[],f.sectionTags||[])},R.cache={},R.compile=function(f,e){e=e||{};var h=f+"||"+!!e.asString,g=this.cache[h];return g?g:(g=this.generate(this.parse(this.scan(f,e.delimiters),f,e),f,e),this.cache[h]=g)}}(typeof exports!="undefined"?exports:Hogan);if(!btf){var btf={}}btf.ui={};btf.i18n={};btf.utils=btf.utils||{};btf.utils.responsive={};btf.cms=btf.cms||{};btf.utils.responsive.images={};btf.cms.highLightSelectedNav=function(){if($(".left-nav").find("a").length>0){$(".left-nav").find('a[href*="'+window.location.pathname+'"]').addClass("selected")}};btf.ui.slideToTop=function(a){a=a||500;$("body, html").animate({scrollTop:0},a)};btf.ui.slideToBottom=function(){$(".footer_section.links").click(function(){$("body, html").animate({scrollTop:$("body").height()},500)})};btf.ui.slideTop=function(){var f=$("#main"),e=$(".footer").find(".top-anchor"),c,b,g,a,d;e.click(btf.ui.slideToTop);$(window).on("scroll",function(){d=$(window).outerHeight(true);g=$(window).scrollTop();c=f.offset().top+f.outerHeight(true)-(d/2)-120;a=g>(d/2)&&g<=c;b=e.is(":visible");if(a&&!b){e.fadeIn(200)}else{if(g>c){e.hide()}else{if(!a&&b){e.fadeOut(200)}}}})};btf.utils.responsive.images.media={MOBILE_SMALL:"(min-width: 320px)",MOBILE:"(max-width: 749px)",TABLET:"(min-width: 768px) and (max-width: 991px)",TABLET_PLUS:"(min-width: 768px)",HANDHELD:"(max-width: 991px)",DESKTOP:"(min-width: 992px)",DESKTOP_SMALL:"(min-width: 992px) and (max-width: 1199px)",DESKTOP_LARGE:"(min-width: 1200px)"};btf.utils.responsive.matchMedia=function(a){return window.matchMedia(a).matches};btf.utils.getParameterByName=function(b,a){var d=new RegExp("[\\?&]"+b+"=([^&#]*)"),c=d.exec(a);return c===null?"":decodeURIComponent(c[1].replace(/\+/g," "))};btf.utils.responsive.nav=function(){var a=btf.utils.responsive.matchMedia(btf.utils.responsive.images.media.DESKTOP);$(window).resize(function(){a=btf.utils.responsive.matchMedia(btf.utils.responsive.images.media.DESKTOP)});if(!a){$("li.level_1 > a, .nav-image a").not(".nav-image a.clickable").click(function(b){$(this).closest("li").children("ul").slideToggle(function(){var f=$(this),g=f.parent(),c=g.parent(),e=g.siblings(),d=false;if(f.attr("style")==="display: none;"){e.each(function(){if($(this).children("ul").hasClass("collapsed-menu-mb")){d=true}});f.removeAttr("style");f.removeClass("collapsed-menu-mb");if(g.hasClass("level_2")&&!d){c.addClass("collapsed-menu-mb")}}else{if(c.hasClass("collapsed-menu-mb")&&g.hasClass("level_2")){c.removeClass("collapsed-menu-mb")}if(!f.find("ul").hasClass("collapsed-menu-mb")){f.addClass("collapsed-menu-mb")}}});b.preventDefault()})}$(".main-nav-trigger").click(function(b){b.preventDefault();$("body").removeClass("body-slidein-country-nav");$("body").toggleClass("body-slidein-main-nav")})};(function(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var a=document.createElement("style");a.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}"));document.querySelector("head").appendChild(a)}}());btf.utils.minibasketRender=function(){$.when(btf.data.ssn(),btf.utils.templateLoader.load(["logout","minibasket","basketCount"])).done(function(d){var c=d[0];btf.i18n=c.i18n;btf.data.registry.set("countryId",c.global.countryId);c.i18n=c.i18n||{};c.i18n.basket=c.i18n.basket||{};var a=parseFloat(basketPrompt).toFixed(2),e=parseFloat(c.basket.totals.subtotalval).toFixed(2),b=(a-e).toFixed(2);if(b>0){c.i18n.basket.BasketPrompt=c.global.currencySymbol+b.toString()}else{c.i18n.basket.BasketPrompt=""}btf.minibasket.render(c);if(c.customer.registered){$(".account-link").after(btf.utils.templateLoader.get("logout")(c))}})};btf.utils.globalFunctions=function(){var a=$(".last","#breadcrumb");$(".search-container").on("shown.bs.collapse",function(){$("input","#form_search").focus()});$(".go-back").click(function(){var b=$("body").hasClass("ProductDetails");if(b&&document.referrer.indexOf(document.domain)===-1){window.location.href="http://"+document.domain}else{window.history.back()}return false});if(a.hasClass("search-breadcrumb")||a.hasClass("basket-breadcrumb")){a.closest("div#breadcrumb").hide()}};btf.utils.modalLinks=function(){var a=$(".modal-link"),b='<div id="modal" class="modal-inline-content modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><a data-dismiss="modal" class="modal-close"><span class="icon-close"></span></a><div id="modal-content"></div></div></div></div></div>';if(a.length>0){$("body").append(b)}$(".modal-link").on("click",function(d){d.preventDefault();var c=this.href;$("#modal-content").load(c+" #contentWording",function(){$("#modal").modal("toggle")})})};if($("html").hasClass("ie9")||$("html").hasClass("ie8")){var placeHolder=$("#emailID").attr("placeholder");var enewsInput=document.getElementById("emailID");if(enewsInput.value===""){enewsInput.value=placeHolder}$(enewsInput).click(function(){if(enewsInput.value===placeHolder){enewsInput.value=""}})}$(function(){btf.utils.responsive.nav();btf.basket.ajaxBasket();btf.minibasket.init();btf.ui.slideToBottom();btf.ui.slideTop();btf.utils.minibasketRender();btf.utils.globalFunctions();btf.utils.modalLinks();btf.cms.highLightSelectedNav()});
/* Respond.js v1.4.2: min/max-width media query polyfill
 * Copyright 2013 Scott Jehl
 * Licensed under MIT
 * http://j.mp/respondjs */
/* matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
/* NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */
(function(a){a.matchMedia=a.matchMedia||function(f,g){var d,b=f.documentElement,c=b.firstElementChild||b.firstChild,e=f.createElement("body"),h=f.createElement("div");h.id="mq-test-1";h.style.cssText="position:absolute;top:-100em";e.style.background="none";e.appendChild(h);return function(i){h.innerHTML='&shy;<style media="'+i+'"> #mq-test-1 { width: 42px; }</style>';b.insertBefore(e,c);d=h.offsetWidth===42;b.removeChild(e);return{matches:d,media:i}}}(a.document)})(this);(function(k){var u={};k.respond=u;u.update=function(){};var c=[],d=function(){var w=false;try{w=new k.XMLHttpRequest()}catch(A){w=new k.ActiveXObject("Microsoft.XMLHTTP")}return function(){return w}}(),n=function(w,B){var A=d();if(!A){return}A.open("GET",w,true);A.onreadystatechange=function(){if(A.readyState!==4||A.status!==200&&A.status!==304){return}B(A.responseText)};if(A.readyState===4){return}A.send(null)},r=function(w){return w.replace(u.regex.minmaxwh,"").match(u.regex.other)};u.ajax=n;u.queue=c;u.unsupportedmq=r;u.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g};u.mediaQueriesSupported=k.matchMedia&&k.matchMedia("only all")!==null&&k.matchMedia("only all").matches;if(u.mediaQueriesSupported){return}var z=k.document,t=z.documentElement,h=[],j=[],q=[],o={},g=30,e=z.getElementsByTagName("head")[0]||t,f=z.getElementsByTagName("base")[0],b=e.getElementsByTagName("link"),l,s,p,y=function(){var B,E=z.createElement("div"),w=z.body,D=t.style.fontSize,C=w&&w.style.fontSize,A=false;E.style.cssText="position:absolute;font-size:1em;width:1em";if(!w){w=A=z.createElement("body");w.style.background="none"}t.style.fontSize="100%";w.style.fontSize="100%";w.appendChild(E);if(A){t.insertBefore(w,t.firstChild)}B=E.offsetWidth;if(A){t.removeChild(w)}else{w.removeChild(E)}t.style.fontSize=D;if(C){w.style.fontSize=C}B=p=parseFloat(B);return B},i=function(L){var Q="clientWidth",C=t[Q],A=z.compatMode==="CSS1Compat"&&C||z.body[Q]||C,O={},P=b[b.length-1],B=new Date().getTime();if(L&&l&&B-l<g){k.clearTimeout(s);s=k.setTimeout(i,g);return}else{l=B}for(var J in h){if(h.hasOwnProperty(J)){var M=h[J],F=M.minw,I=M.maxw,K=F===null,N=I===null,w="em";if(!!F){F=parseFloat(F)*(F.indexOf(w)>-1?p||y():1)}if(!!I){I=parseFloat(I)*(I.indexOf(w)>-1?p||y():1)}if(!M.hasquery||(!K||!N)&&(K||A>=F)&&(N||A<=I)){if(!O[M.media]){O[M.media]=[]}O[M.media].push(j[M.rules])}}}for(var H in q){if(q.hasOwnProperty(H)){if(q[H]&&q[H].parentNode===e){e.removeChild(q[H])}}}q.length=0;for(var G in O){if(O.hasOwnProperty(G)){var E=z.createElement("style"),D=O[G].join("\n");E.type="text/css";E.media=G;e.insertBefore(E,P.nextSibling);if(E.styleSheet){E.styleSheet.cssText=D}else{E.appendChild(z.createTextNode(D))}q.push(E)}}},m=function(K,w,B){var I=K.replace(u.regex.comments,"").replace(u.regex.keyframes,"").match(u.regex.media),L=I&&I.length||0;w=w.substring(0,w.lastIndexOf("/"));var A=function(M){return M.replace(u.regex.urls,"$1"+w+"$2$3")},C=!L&&B;if(w.length){w+="/"}if(C){L=1}for(var F=0;F<L;F++){var G,H,D,J;if(C){G=B;j.push(A(K))}else{G=I[F].match(u.regex.findStyles)&&RegExp.$1;j.push(RegExp.$2&&A(RegExp.$2))}D=G.split(",");J=D.length;for(var E=0;E<J;E++){H=D[E];if(r(H)){continue}h.push({media:H.split("(")[0].match(u.regex.only)&&RegExp.$2||"all",rules:j.length-1,hasquery:H.indexOf("(")>-1,minw:H.match(u.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:H.match(u.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}}i()},x=function(){if(c.length){var w=c.shift();n(w.href,function(A){m(A,w.href,w.media);o[w.href]=true;k.setTimeout(function(){x()},0)})}},a=function(){for(var C=0;C<b.length;C++){var B=b[C],A=B.href,D=B.media,w=B.rel&&B.rel.toLowerCase()==="stylesheet";if(!!A&&w&&!o[A]){if(B.styleSheet&&B.styleSheet.rawCssText){m(B.styleSheet.rawCssText,A,D);o[A]=true}else{if(!/^([a-zA-Z:]*\/\/)/.test(A)&&!f||A.replace(RegExp.$1,"").split("/")[0]===k.location.host){if(A.substring(0,2)==="//"){A=k.location.protocol+A}c.push({href:A,media:D})}}}}x()};a();u.update=a;u.getEmValue=y;function v(){i(true)}if(k.addEventListener){k.addEventListener("resize",v,false)}else{if(k.attachEvent){k.attachEvent("onresize",v)}}})(this);
/*
 * jQuery-ajaxTransport-XDomainRequest - v1.0.4 - 2015-03-05
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2015 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{b(jQuery)}}}(function(a){if(a.support.cors||!a.ajaxTransport||!window.XDomainRequest){return a}var d=/^(https?:)?\/\//i;var c=/^get|post$/i;var b=new RegExp("^(//|"+location.protocol+")","i");a.ajaxTransport("* text html xml json",function(h,g,f){if(!h.crossDomain||!h.async||!c.test(h.type)||!d.test(h.url)||!b.test(h.url)){return}var e=null;return{send:function(m,l){var k="";var j=(g.dataType||"").toLowerCase();e=new XDomainRequest();if(/^\d+$/.test(g.timeout)){e.timeout=g.timeout}e.ontimeout=function(){l(500,"timeout")};e.onload=function(){var n="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType;var i={code:200,message:"success"};var r={text:e.responseText};try{if(j==="html"||/text\/html/i.test(e.contentType)){r.html=e.responseText}else{if(j==="json"||(j!=="text"&&/\/json/i.test(e.contentType))){try{r.json=a.parseJSON(e.responseText)}catch(p){i.code=500;i.message="parseerror"}}else{if(j==="xml"||(j!=="text"&&/\/xml/i.test(e.contentType))){var q=new ActiveXObject("Microsoft.XMLDOM");q.async=false;try{q.loadXML(e.responseText)}catch(p){q=undefined}if(!q||!q.documentElement||q.getElementsByTagName("parsererror").length){i.code=500;i.message="parseerror";throw"Invalid XML: "+e.responseText}r.xml=q}}}}catch(o){throw o}finally{l(i.code,i.message,r,n)}};e.onprogress=function(){};e.onerror=function(){l(500,"error",{text:e.responseText})};if(g.data){k=(a.type(g.data)==="string")?g.data:a.param(g.data)}e.open(h.type,h.url);e.send(k)},abort:function(){if(e){e.abort()}}}});return a}));!function(){"function"!=typeof Object.create&&(Object.create=function(){var c=function(){};return function(d){if(arguments.length>1){throw Error("Second argument not supported")}if("object"!=typeof d){throw new TypeError("Argument must be an object")}c.prototype=d;var f=new c;return c.prototype=null,f}}()),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(d){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var c=Array.prototype.slice.call(arguments,1),g=this,h=function(){},f=function(){return g.apply(this instanceof h?this:d,c.concat(Array.prototype.slice.call(arguments)))};return h.prototype=this.prototype,f.prototype=new h,f});var b={initialise:function(){var d=this.el=$(".inspiration-widget"),c=d.length;if(c>0){for(var g=d.length-1;g>=0;g--){var h=$(d[g]),f=this.getConfiguration(h);h.attr("data-id",g),this.getItems(h,f)}}return this},getConfiguration:function(d){for(var c,h={view:{},server:{order:"mostLoved"}},k=["colours","rooms","styles","order","types","productCodes"],g=["count","row","type"],j=d[0],f=k.length-1;f>=0;f--){c=k[f],j.attributes["data-get-"+c]&&(h.server[c]=j.attributes["data-get-"+c].value.split(","))}for(var f=g.length-1;f>=0;f--){c=g[f],j.attributes["data-item-"+c]&&(h.view[c]=j.attributes["data-item-"+c].value)}return h},getItems:function(d,c){$.ajax({url:"//inspiration.farrow-ball.com/api/externalinspiration",data:c.server,dataType:"json",traditional:!0}).done(function(f){f.length?c.view.type&&"multiple"===c.view.type?this.multiple(f,d,c):this.single(f,d,c):$("body").trigger("InspirationWidgetNoImages",this)}.bind(this)).fail(function(g,f,h){var j=f+", "+h;console&&console.log("Request Failed: "+j),$("body").trigger("InspirationWidgetError",j)}.bind(this))},single:function(d,c){var f="";f+="<picture>",f+='<!--[if IE 9]><video style="display: none;"><![endif]-->',f+='<source srcset="'+d[0].Src+'&width=700&height=506" media="(min-width: 992px)">',f+='<source srcset="'+d[0].Src+'&width=353&height=353" media="(min-width: 768px)">',f+="<!--[if IE 9]></video><![endif]-->",f+='<img srcset="'+d[0].Src+'&width=462&height=313">',f+="</picture>",c.prepend(f)},multiple:function(v,j,h){var d='<ul class="inspiration-widget--container"></ul>';j.prepend(d);for(var g=j.find(".inspiration-widget--container"),w=v.length,m=j.attr("data-item-row"),q="",f=0,k=w;k>f;f++){var i=v[f];f%parseInt(m,10)===0&&(0!==f&&(q+="</li>"),q+='<li class="inspiration-widget--col">'),q+='<div class="inspiration-widget--item" data-widget-id="'+f+'">',q+='<a href="'+i.Url+'" target="_blank" class="inspiration-widget--image">',q+='<img src="'+i.Src+'&width=255&height=255&hires=true&thumb=true" />',q+="</a>",q+='<div class="inspiration-widget--content">',q+="<p>"+i.Description+"</p>",q+="<p>"+i.Contributor.replace("FABAdmin","Farrow &amp; Ball")+" | ",q+='<a href="'+i.Url+'" target="_blank">View more</a></p>',q+="</div>",q+="</div>"}q+="</li>",g.prepend(q),Object.create(a).setElement(j,h).run()}},a={setElement:function(d,c){return this.opt={el:d,ul:d.find(".inspiration-widget--container"),li:d.find(".inspiration-widget--col"),buttons:{left:null,right:null},numItems:parseInt(c.view.count,10)?parseInt(c.view.count,10):4},this},run:function(){return this.opt.itemCount=this.opt.li.length,this.opt.itemCount>this.opt.numItems?(this.opt.currentPos=0,this.opt.current=0,this.opt.supportsTransitions=this.checkTransitionSupport(),this.setButton(),this.getMeasurements(),this.applyMeasurements(),this.checkCurrent(),this.bind()):this.opt.itemCount===this.opt.numItems&&(this.getMeasurements(),this.applyMeasurements()),$("body").trigger("InspirationWidgetLoaded",this),this},checkTransitionSupport:function(){var d=document.body||document.documentElement,c=d.style,g="transition";if("string"==typeof c[g]){return !0}var h=["Moz","webkit","Webkit","Khtml","O","ms"];g=g.charAt(0).toUpperCase()+g.substr(1);for(var f=0;f<h.length;f++){if("string"==typeof c[h[f]+g]){return !0}}return !1},setButton:function(){var c='<div class="inspiration-widget--controls"><button class="inspiration-widget--control inspiration-widget--control__left" data-slide="prev"><span class="sr-only">Previous</span></button><button class="inspiration-widget--control inspiration-widget--control__right" data-slide="next"><span class="sr-only">Next</span></button></div>';this.opt.el.append(c),this.opt.buttons.left=this.opt.el.find(".inspiration-widget--control__left"),this.opt.buttons.right=this.opt.el.find(".inspiration-widget--control__right")},getMeasurements:function(){var c=this.opt;c.viewportItemWidth=100/c.numItems,c.itemWidth=100/c.itemCount,c.wrapperWidth=c.viewportItemWidth*c.itemCount},applyMeasurements:function(){var c=this.opt;c.ul.css("width",c.wrapperWidth+"%"),c.li.css("width",c.itemWidth+"%")},runAnimation:function(){var c=this.opt;c.supportsTransitions?c.ul.css("left",c.currentPos+"%"):c.ul.animate({left:c.currentPos+"%"},500)},slideNext:function(){var d=this.opt;if(d.current+2*d.numItems<d.itemCount-1){d.currentPos=d.currentPos-d.numItems*d.viewportItemWidth}else{var c=d.itemCount-(d.current+d.numItems);d.currentPos=d.currentPos-c*d.viewportItemWidth}d.current=Math.round(Math.abs(d.currentPos/d.viewportItemWidth)),this.checkCurrent(),this.runAnimation()},slidePrevious:function(){var c=this.opt;c.currentPos=c.current<c.numItems?c.currentPos+c.current*c.viewportItemWidth:c.currentPos+c.numItems*c.viewportItemWidth,c.current=Math.round(Math.abs(c.currentPos/c.viewportItemWidth)),this.checkCurrent(),this.runAnimation()},checkCurrent:function(){var c=this.opt;c.current>0?c.buttons.left.attr("disabled",!1):c.buttons.left.attr("disabled",!0),c.current<c.itemCount-c.numItems?c.buttons.right.attr("disabled",!1):c.buttons.right.attr("disabled",!0)},bind:function(){this.opt.buttons.right.on("click.next",this.slideNext.bind(this)),this.opt.buttons.left.on("click.prev",this.slidePrevious.bind(this));var c=function(){this.opt.ul.css("left","5%"),setTimeout(function(){this.opt.ul.css("left","0%"),this.opt.ul.addClass("inspiration-widget--container__force-left")}.bind(this),500)};this.isScrolledIntoView(this.opt.ul)&&$(window).width()<=992?setTimeout(c.bind(this),250):$(window).on("scroll.widget"+this.opt.el.data("id"),function(){this.isScrolledIntoView(this.opt.ul)&&$(window).width()<=992&&(setTimeout(c.bind(this),250),$(window).off("scroll.widget"+this.opt.el.data("id")))}.bind(this))},isScrolledIntoView:function(d){var c=$(d),h=$(window),k=h.scrollTop(),g=k+h.height(),j=c.offset().top,f=j+c.height();return g>=f&&j>=k}};b.initialise()}();(function(ad,ac){var ab,aa,Z,Y,X,W,V,U,T,S,R,Q,P,O,M,K,J,I,H,G,F,E,D,C,N,L=[].indexOf||function(e){for(var d=0,f=this.length;f>d;d++){if(d in this&&this[d]===e){return d}}return -1};I=ad.document,aa="before",ab="after",R="readyState",S="addEventListener",T="removeEventListener",X="dispatchEvent",M="XMLHttpRequest",W="FormData",Q=["load","loadend","loadstart"],Z=["progress","abort","error","timeout"],F=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(F)&&(F=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),(N=Array.prototype).indexOf||(N.indexOf=function(g){var f,j,i,h;for(f=i=0,h=this.length;h>i;f=++i){if(j=this[f],j===g){return f}}return -1}),D=function(d,c){return Array.prototype.slice.call(d,c)},J=function(b){return"returnValue"===b||"totalSize"===b||"position"===b},G=function(g,f){var j,i;for(j in g){if(i=g[j],!J(j)){try{f[j]=g[j]}catch(h){}}}return f},E=function(i,g,n){var m,l,k,j;for(l=function(b){return function(p){var o,c,a;o={};for(c in p){J(c)||(a=p[c],o[c]=a===g?n:a)}return n[X](b,o)}},k=0,j=i.length;j>k;k++){m=i[k],n._has(m)&&(g["on"+m]=l(m))}},H=function(e){var d;if(null!=I.createEventObject){return d=I.createEventObject(),d.type=e,d}try{return new Event(e)}catch(f){return{type:e}}},Y=function(b){var h,g,f;return g={},f=function(c){return g[c]||[]},h={},h[S]=function(d,i,e){g[d]=f(d),g[d].indexOf(i)>=0||(e=e===ac?g[d].length:e,g[d].splice(e,0,i))},h[T]=function(d,i){var e;return d===ac?void (g={}):(i===ac&&(g[d]=[]),e=f(d).indexOf(i),void (-1!==e&&f(d).splice(e,1)))},h[X]=function(){var a,p,o,n,m,l,e,c;for(a=D(arguments),p=a.shift(),b||(a[0]=G(a[0],H(p))),n=h["on"+p],n&&n.apply(h,a),c=f(p).concat(f("*")),o=l=0,e=c.length;e>l;o=++l){m=c[o],m.apply(h,a)}},h._has=function(c){return !(!g[c]&&!h["on"+c])},b&&(h.listeners=function(c){return D(f(c))},h.on=h[S],h.off=h[T],h.fire=h[X],h.once=function(e,c){var i;return i=function(){return h.off(e,i),c.apply(null,arguments)},h.on(e,i)},h.destroy=function(){return g={}}),h},C=Y(!0),C.EventEmitter=Y,C[aa]=function(d,c){if(d.length<1||d.length>2){throw"invalid hook"}return C[S](aa,d,c)},C[ab]=function(d,c){if(d.length<2||d.length>3){throw"invalid hook"}return C[S](ab,d,c)},C.enable=function(){ad[M]=O,V&&(ad[W]=P)},C.disable=function(){ad[M]=C[M],V&&(ad[W]=V)},K=C.headers=function(v,u){var t,s,r,q,p,o,n,m,l;switch(null==u&&(u={}),typeof v){case"object":s=[];for(r in v){p=v[r],q=r.toLowerCase(),s.push(""+q+": "+p)}return s.join("\n");case"string":for(s=v.split("\n"),n=0,m=s.length;m>n;n++){t=s[n],/([^:]+):\s*(.+)/.test(t)&&(q=null!=(l=RegExp.$1)?l.toLowerCase():void 0,o=RegExp.$2,null==u[q]&&(u[q]=o))}return u}},V=ad[W],P=function(d){var c;this.fd=d?new V(d):new V,this.form=d,c=[],Object.defineProperty(this,"entries",{get:function(){var a;return a=d?D(d.querySelectorAll("input,select")).filter(function(f){var e;return"checkbox"!==(e=f.type)&&"radio"!==e||f.checked}).map(function(b){return[b.name,"file"===b.type?b.files:b.value]}):[],a.concat(c)}}),this.append=function(b){return function(){var a;return a=D(arguments),c.push(a),b.fd.append.apply(b.fd,a)}}(this)},V&&(C[W]=V,ad[W]=P),U=ad[M],C[M]=U,O=ad[M]=function(){var ai,ah,ag,af,ae,B,z,r,q,n,e,x,w,v,o,m,l,g,f,d,c;ai=-1,g=new C[M],e={},v=null,z=void 0,o=void 0,x=void 0,n=function(){var a,j,i,h;if(x.status=v||g.status,v===ai&&10>F||(x.statusText=g.statusText),v!==ai){h=K(g.getAllResponseHeaders());for(a in h){i=h[a],x.headers[a]||(j=a.toLowerCase(),x.headers[j]=i)}}},q=function(){g.responseType&&"text"!==g.responseType?"document"===g.responseType?(x.xml=g.responseXML,x.data=g.responseXML):x.data=g.response:(x.text=g.responseText,x.data=g.responseText),"responseURL" in g&&(x.finalUrl=g.responseURL)},l=function(){B.status=x.status,B.statusText=x.statusText},m=function(){"text" in x&&(B.responseText=x.text),"xml" in x&&(B.responseXML=x.xml),"data" in x&&(B.response=x.data),"finalUrl" in x&&(B.responseURL=x.finalUrl)},af=function(b){for(;b>ah&&4>ah;){B[R]=++ah,1===ah&&B[X]("loadstart",{}),2===ah&&l(),4===ah&&(l(),m()),B[X]("readystatechange",{}),4===ah&&setTimeout(ag,0)}},ag=function(){z||B[X]("load",{}),B[X]("loadend",{}),z&&(B[R]=0)},ah=0,w=function(i){var h,j;return 4!==i?void af(i):(h=C.listeners(ab),j=function(){var b;return h.length?(b=h.shift(),2===b.length?(b(e,x),j()):3===b.length&&e.async?b(e,x,j):j()):af(4)},void j())},B=e.xhr=Y(),g.onreadystatechange=function(){try{2===g[R]&&n()}catch(b){}4===g[R]&&(o=!1,n(),q()),w(g[R])},r=function(){z=!0},B[S]("error",r),B[S]("timeout",r),B[S]("abort",r),B[S]("progress",function(){3>ah?w(3):B[X]("readystatechange",{})}),("withCredentials" in g||C.addWithCredentials)&&(B.withCredentials=!1),B.status=0,c=Z.concat(Q);for(f=0,d=c.length;d>f;f++){ae=c[f],B["on"+ae]=null}return B.open=function(b,k,j,i,h){ah=0,z=!1,o=!1,e.headers={},e.headerNames={},e.status=0,x={},x.headers={},e.method=b,e.url=k,e.async=j!==!1,e.user=i,e.pass=h,w(1)},B.send=function(ak){var aj,A,y,u,t,s,p,k;for(k=["type","timeout","withCredentials"],s=0,p=k.length;p>s;s++){A=k[s],y="type"===A?"responseType":A,y in B&&(e[A]=B[y])}e.body=ak,t=function(){var al,j,ap,ao,an,am;for(E(Z,g,B),B.upload&&E(Z.concat(Q),g.upload,B.upload),o=!0,g.open(e.method,e.url,e.async,e.user,e.pass),an=["type","timeout","withCredentials"],ap=0,ao=an.length;ao>ap;ap++){A=an[ap],y="type"===A?"responseType":A,A in e&&(g[y]=e[A])}am=e.headers;for(al in am){j=am[al],al&&g.setRequestHeader(al,j)}e.body instanceof P&&(e.body=e.body.fd),g.send(e.body)},aj=C.listeners(aa),(u=function(){var b,h;return aj.length?(b=function(i){return"object"!=typeof i||"number"!=typeof i.status&&"number"!=typeof x.status?void u():(G(i,x),L.call(i,"data")<0&&(i.data=i.response||i.text),void w(4))},b.head=function(i){return G(i,x),w(2)},b.progress=function(i){return G(i,x),w(3)},h=aj.shift(),1===h.length?b(h(e)):2===h.length&&e.async?h(e,b):b()):t()})()},B.abort=function(){v=ai,o?g.abort():B[X]("abort",{})},B.setRequestHeader=function(i,h){var k,j;k=null!=i?i.toLowerCase():void 0,j=e.headerNames[k]=e.headerNames[k]||i,e.headers[j]&&(h=e.headers[j]+", "+h),e.headers[j]=h},B.getResponseHeader=function(i){var h;return h=null!=i?i.toLowerCase():void 0,x.headers[h]},B.getAllResponseHeaders=function(){return K(x.headers)},g.overrideMimeType&&(B.overrideMimeType=function(){return g.overrideMimeType.apply(g,arguments)}),g.upload&&(B.upload=e.upload=Y()),B},"function"==typeof define&&define.amd?define("xhook",[],function(){return C}):(this.exports||this).xhook=C}).call(this,window);xhook.before(function(t,s){if(!window.XDomainRequest){return s()}var r=t.url,q=window.location,p=q.hostname+(q.port?":"+q.port:"");if(!/^https?:\/\/([^\?\/]+)/.test(r)||RegExp.$1===p){return s()}var o=t.method;"GET"!==o&&(o="POST"),r=r.replace(/^https?:/,q.protocol);var n=new window.XDomainRequest;n.timeout=t.timeout;for(var m=function(a){n["on"+a]=function(){t.xhr.dispatchEvent(a)}},l=["progress","timeout","error"],k=0;k<l.length;++k){m(l[k])}n.onload=function(){s({status:200,statusText:"OK",headers:{"Content-Type":n.contentType},text:n.responseText})},n.open(o,r),n.send(t.body)});